<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Japan MR Resource Central for clients | Seed Planning</title>
  <meta name="description" content="Japan MR Resource Central — Curated resources for conducting healthcare market research in Japan" />
  <style>
    :root{
      /* Refined Medical Green Theme - matching index.html */
      --bg: #ffffff;
      --ink: #21343b;
      --muted: #5e7a85;
      --line: #e6eff1;
      --accent: #2f6f7e;
      --accent-2: #5baaae;
      --chip: #edf7f7;
      --mark: #fff3b0;
      --card: #ffffff;
      --sub: #5e7a85;
      --hint: #7a8b94;
      --brand: #2f6f7e;
      --brand-2: #5baaae;
      --brand-light: #edf7f7;
      --medical-gradient: linear-gradient(135deg, #2f6f7e 0%, #5baaae 100%);
      --shadow-light: 0 2px 8px rgba(24,60,70,.06);
      --shadow-medium: 0 6px 24px rgba(24,60,70,.08);
      --shadow-strong: 0 12px 32px rgba(24,60,70,.12);
      --border-medical: 1px solid #e6eff1;
      --radius: 14px;
      --radius-sm: 10px;
    }
    *{box-sizing:border-box}
    body{
      margin: 0;
      font-family: "Inter", "Noto Sans", "Noto Sans JP", system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: var(--bg);
      color: var(--ink);
      line-height: 1.7;
      font-weight: 400;
    }
    header{
      padding: 48px 24px 32px; 
      max-width: 1120px; 
      margin: 0 auto;
    }
    
    .sup{
      color: var(--accent-2); 
      letter-spacing: 0.08em; 
      font-size: 12px; 
      text-transform: uppercase;
      font-weight: 500;
    }
    
    h1{
      margin: 0.2rem 0 0; 
      font-weight: 800; 
      font-size: clamp(28px, 4vw, 40px);
      color: var(--ink);
      line-height: 1.2;
    } 
    
    .lead{
      color: var(--muted); 
      margin: 10px 0 24px; 
      max-width: 850px; 
      line-height: 1.7;
      font-size: 16px;
      font-weight: 400;
    }
    
    /* Refined Stats Banner */
    .stats-banner {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 20px;
      margin: 20px 0 0;
      padding: 18px 24px;
      background: var(--chip);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow-light);
    }
    
    .stat-item {
      text-align: center;
      flex: 1;
    }
    
    .stat-number {
      font-size: 24px;
      font-weight: 700;
      color: var(--accent);
      margin-bottom: 2px;
      line-height: 1;
    }
    
    .stat-label {
      font-size: 11px;
      color: var(--muted);
      font-weight: 500;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    .toolbar{ 
      margin: 32px 0 0; 
      display: flex; 
      gap: 12px; 
      flex-wrap: wrap; 
    }
    
    .search{ 
      flex: 1 1 400px; 
      display: flex; 
      align-items: center; 
      gap: 12px; 
      background: var(--card); 
      border: var(--border-medical); 
      border-radius: 16px; 
      padding: 14px 18px; 
      box-shadow: var(--shadow-light);
      transition: all 0.2s ease;
    }
    
    .search:hover {
      border-color: var(--brand);
      box-shadow: var(--shadow-medium);
    }
    
    .search input{ 
      width: 100%; 
      background: transparent; 
      border: none; 
      outline: none; 
      color: var(--ink); 
      font-size: 16px; 
      font-weight: 400;
    }
    
    .search input::placeholder {
      color: var(--hint);
    }
    
    .tagbar{
      display: flex; 
      flex-wrap: wrap; 
      gap: 8px;
    }
    
    .chip{ 
      font-size: 12px; 
      padding: 6px 10px; 
      border-radius: 999px; 
      background: var(--chip); 
      color: var(--accent); 
      border: 1px solid #d9ecec; 
      cursor: pointer; 
      transition: all 0.2s ease;
      font-weight: 500;
    }
    
    .chip:hover {
      background: var(--line);
      transform: translateY(-1px);
    }
    
    .chip.active{
      background: var(--accent-2); 
      color: white; 
      border-color: var(--accent-2);
    }
    main{
      max-width: 1200px; 
      padding: 24px 24px 120px; 
      margin: 0 auto;
    }
    
    .grid{ 
      display: grid; 
      gap: 20px; 
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); 
    }
    
    .card{ 
      background: var(--card);
      border: 1px solid var(--line); 
      border-radius: var(--radius-sm); 
      padding: 16px; 
      display: flex; 
      flex-direction: column; 
      gap: 10px;
      transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease;
      box-shadow: var(--shadow-light);
    }
    
    .card:hover{ 
      transform: translateY(-2px); 
      box-shadow: var(--shadow-medium); 
      border-color: var(--accent-2);
    }
    .title{
      font-weight: 700; 
      font-size: 16px; 
      line-height: 1.4;
      color: var(--ink);
      margin: 0;
    }
    
    .category{
      font-size: 12px; 
      color: var(--hint);
      margin-top: 8px;
    }
    
    .summary{
      color: var(--sub); 
      font-size: 14px; 
      line-height: 1.75;
      margin: 0;
    }
    
    .actions{
      display: flex; 
      gap: 10px; 
      margin-top: 6px; 
      flex-wrap: wrap;
    }
    
    .btn{ 
      background: var(--accent); 
      color: white; 
      border: 1px solid var(--accent); 
      border-radius: var(--radius-sm); 
      padding: 8px 12px; 
      font-weight: 600; 
      text-decoration: none; 
      display: inline-flex; 
      align-items: center; 
      gap: 6px;
      font-size: 13px;
      transition: all 0.2s ease;
    }
    
    .btn:hover {
      background: var(--accent-2);
      border-color: var(--accent-2);
    }
    
    .btn.secondary{ 
      background: var(--chip); 
      color: var(--ink); 
      border-color: var(--line);
    }
    
    .btn.secondary:hover {
      background: var(--line);
    }
    
    .meta{
      display: flex; 
      gap: 6px; 
      flex-wrap: wrap;
      margin-top: 8px;
    }
    
    .pill{
      font-size: 11px; 
      color: var(--accent); 
      background: var(--chip); 
      border: 1px solid #d9ecec; 
      padding: 4px 8px; 
      border-radius: 999px;
      font-weight: 500;
    }
    .empty{
      display: none; 
      text-align: center; 
      color: var(--hint); 
      padding: 60px 20px;
      background: var(--card);
      border: var(--border-medical);
      border-radius: 20px;
      margin: 20px 0;
    }
    
    footer{
      max-width: 1200px; 
      margin: 0 auto; 
      padding: 40px 24px 80px; 
      color: var(--hint);
      border-top: 1px solid var(--ring);
      margin-top: 60px;
    }
    
    .hidden{display: none}
    
    /* Refined Guide Section */
    .guide-section{
      background: var(--chip);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      padding: 24px;
      margin: 32px 0;
      position: relative;
      box-shadow: var(--shadow-light);
    }
    
    .guide-title{
      margin: 0 0 8px;
      font-size: 24px;
      font-weight: 700;
      color: var(--accent-2);
    }
    
    .guide-subtitle{
      margin: 0 0 24px;
      color: var(--sub);
      font-size: 14px;
      line-height: 1.5;
    }
    .question{
      display: none;
      animation: fadeIn 0.4s ease;
    }
    .question.active{
      display: block;
    }
    .question h3{
      margin: 0 0 20px;
      font-size: 20px;
      font-weight: 600;
      color: var(--ink);
    }
    .options{
      display: grid;
      gap: 16px;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    }
    .option-btn{
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--radius-sm);
      padding: 14px 18px;
      color: var(--ink);
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 14px;
      font-weight: 500;
      text-align: left;
    }
    
    .option-btn:hover{
      background: var(--chip);
      border-color: var(--accent-2);
      transform: translateY(-1px);
    }
    .recommendations{
      animation: slideUp 0.4s ease;
      border-top: 2px solid var(--accent-2);
      padding-top: 20px;
      margin-top: 24px;
    }
    
    .recommendations h3{
      margin: 0 0 16px;
      color: var(--accent-2);
      font-size: 20px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .rec-cards{
      display: grid;
      gap: 12px;
      margin-bottom: 20px;
    }
    
    .rec-card{
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--radius-sm);
      padding: 16px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
      box-shadow: var(--shadow-light);
      transition: all 0.2s ease;
    }
    
    .rec-card:hover {
      box-shadow: var(--shadow-medium);
      transform: translateY(-1px);
      border-color: var(--accent-2);
    }
    
    .rec-info h4{
      margin: 0 0 4px;
      font-size: 16px;
      font-weight: 600;
      color: var(--ink);
    }
    
    .rec-info p{
      margin: 0;
      font-size: 13px;
      color: var(--sub);
      line-height: 1.4;
    }
    .guide-toggle{
      position: absolute;
      top: 20px;
      right: 24px;
    }
    
    .reset-btn{
      margin-top: 16px;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
      /* brand logo in footer */
    .brand{display:inline-flex; align-items:center; gap:10px; margin:8px 0 0;}
    .brand img{height:28px; display:block; filter: drop-shadow(0 2px 6px rgba(0,0,0,.35));}
  </style>
</head>
<body>
  <header>
    <!-- Navigation -->
    <nav style="display: flex; justify-content: center; gap: 16px; margin-bottom: 24px; font-size: 14px;">
      <a href="hub.html" style="background: var(--chip); color: var(--accent); padding: 8px 16px; border-radius: 20px; text-decoration: none; font-weight: 600;">🏠 Hub</a>
      <a href="index.html" style="color: var(--muted); text-decoration: none; font-weight: 500;">❓ FAQ</a>
      <span style="color: var(--accent); font-weight: 600;">📚 Resources</span>
    </nav>
    
    <div class="sup">Seed Planning | Portal</div>
    <h1>Japan MR Resource Central</h1>
    <p class="lead">Fast, credible primers for conducting healthcare market research in Japan. Skimmable summaries, direct PDF downloads.</p>
    
    <!-- Resource Statistics -->
    <div class="stats-banner">
      <div class="stat-item">
        <div class="stat-number">8</div>
        <div class="stat-label">Guides</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">68+</div>
        <div class="stat-label">FAQ</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">7</div>
        <div class="stat-label">Categories</div>
      </div>
      <div class="stat-item">
        <div class="stat-number">PDF</div>
        <div class="stat-label">Ready</div>
      </div>
    </div>
    
    <!-- What would you like to know? Section -->
    <div class="guide-section" id="guide">
      <h2 class="guide-title">What would you like to know?</h2>
      <p class="guide-subtitle">Answer a few questions to find the most relevant resources for your needs</p>
      <div class="questions" id="questions">
        <div class="question active" data-step="1">
          <h3>What's your primary focus?</h3>
          <div class="options">
            <button class="option-btn" data-focus="patient-research" data-next="2">Patient Research</button>
            <button class="option-btn" data-focus="hcp-research" data-next="2">Healthcare Professional Research</button>
            <button class="option-btn" data-focus="system-overview" data-next="3">Understanding Japan's Healthcare System</button>
            <button class="option-btn" data-focus="compliance" data-next="4">Compliance & Legal Requirements</button>
          </div>
        </div>
        
        <div class="question" data-step="2">
          <h3>What specific aspect interests you most?</h3>
          <div class="options patient-research-options">
            <button class="option-btn" data-topic="recruitment" data-recommend="patient-guide,privacy-guide">Patient Recruitment</button>
            <button class="option-btn" data-topic="rare-disease" data-recommend="patient-guide">Rare Disease Research</button>
            <button class="option-btn" data-topic="privacy" data-recommend="privacy-guide">Privacy & Data Protection</button>
            <button class="option-btn" data-topic="screening" data-recommend="checkup-guide">Health Screening & Check-ups</button>
          </div>
          <div class="options hcp-research-options">
            <button class="option-btn" data-topic="oncology" data-recommend="oncology-guide">Oncology Specialists</button>
            <button class="option-btn" data-topic="fieldwork" data-recommend="fieldwork-guide">Fieldwork & Moderation</button>
            <button class="option-btn" data-topic="recruitment-hcp" data-recommend="fieldwork-guide,faq-guide">HCP Recruitment</button>
            <button class="option-btn" data-topic="honoraria" data-recommend="faq-guide">Honoraria & Incentives</button>
          </div>
        </div>
        
        <div class="question" data-step="3">
          <h3>Which aspect of the healthcare system?</h3>
          <div class="options system-overview-options">
            <button class="option-btn" data-topic="insurance" data-recommend="insurance-guide">Universal Health Insurance</button>
            <button class="option-btn" data-topic="pricing" data-recommend="pricing-guide">Drug Pricing & Reimbursement</button>
            <button class="option-btn" data-topic="overview" data-recommend="faq-guide,insurance-guide">General System Overview</button>
          </div>
        </div>
        
        <div class="question" data-step="4">
          <h3>What compliance area?</h3>
          <div class="options compliance-options">
            <button class="option-btn" data-topic="appi" data-recommend="privacy-guide">APPI & Data Privacy</button>
            <button class="option-btn" data-topic="consent" data-recommend="privacy-guide,patient-guide">Informed Consent</button>
            <button class="option-btn" data-topic="general-compliance" data-recommend="faq-guide">General Compliance Guidelines</button>
          </div>
        </div>
      </div>
      
      <div class="recommendations hidden" id="recommendations">
        <h3>📋 Recommended Resources</h3>
        <div class="rec-cards" id="rec-cards"></div>
        <button class="btn secondary reset-btn" onclick="resetGuide()">Start Over</button>
      </div>
      
      <div class="guide-toggle">
        <button class="btn secondary" onclick="toggleGuide()" id="guide-toggle">Hide Guide</button>
      </div>
    </div>
    
    <div class="toolbar">
      <label class="search" aria-label="Search documents">
        🔎
        <input id="q" type="search" placeholder="Filter by keyword (e.g., reimbursement, oncology, privacy, recruitment)" />
      </label>
      <div class="tagbar" id="tagbar" aria-label="Filter by tag"></div>
    </div>
  </header>

  <main>
    <div class="grid" id="grid" role="list"></div>
    <div class="empty" id="empty">No matching resources found.</div>
  </main>

  <footer>
    <a class="brand" href="https://www.seedplanning.co.jp/global/" target="_blank" rel="noopener" aria-label="Seed Planning Global (opens site)">
      <img src="seed-planning-logo.png" alt="Seed Planning logo">
    </a>
    <small>© Seed Planning — Summaries are abbreviated previews. Please refer to the original PDFs for full detail.</small>
  </footer>

  <script>
    // ---- Files are served from /pdf/ ----
    const basePath = "/pdf/";

    // ---- Document data (title / filename / category / tags / summary) ----
    // Copy tuned for overseas clients — clear value, actionable implications
    const docs = [
      {
        title: "Guide to Japan Medical Research — FAQ (Full Version)",
        filename: "Guide_to_Japan_Medical_Research_FAQ.pdf",
        category: "FAQ & Playbook",
        tags: ["FAQ","localization","recruitment","APPI","honoraria"],
        summary: "68-question FAQ spanning insurance basics, access, HCP roles, oncology pathways, recruitment & incentives, privacy/APPI, and moderation culture—built as a one‑stop primer for overseas teams planning research in Japan. Includes do’s/don’ts and scheduling caveats.",
        site: "https://yoshi-seed.github.io/global/index.html",
        id: "faq-guide"
      },
      {
        title: "Insights into Japan’s Universal Health Insurance System",
        filename: "Insights_into_Japan’s_Universal_Health_Insurance_System_by_Seed_Planning.pdf",
        category: "Insurance & Access",
        tags: ["universal coverage","free access","fee schedule"],
        summary: "How Japan’s universal coverage, low co-pays, and nationwide fee schedule shape provider incentives and patient behavior. What this means for research access, HCP availability, and why non-reimbursed activities can be hard to drive without clear value or support."
      },
      {
        title: "Japan Insurance System — Pricing & Reimbursement Basics",
        filename: "Japan_insurance_system_summary_Drug_Pricing_Process_by_Seed_Planning.pdf",
        category: "Pricing & Reimbursement",
        tags: ["points system","biennial revision","drug pricing"],
        summary: "A practical walkthrough of codes, points, and periodic price revisions. Explains why site-level price flexibility is limited, how to read codes correctly, and how to budget realistically for Japan-based activities."
      },
      {
        title: "Navigating Privacy & Platforms in Japanese Patient Research",
        filename: "Navigating_Privacy_and_Platforms_in_Japanese_Patient_Research_by_Seed_Planning.pdf",
        category: "Privacy & Data",
        tags: ["APPI","consent","cross-border transfer","UX"],
        summary: "APPI requirements made usable: explicit consent, purpose limitation, and managing cross-border transfers. Platform choices that reduce friction for Japanese users, plus operational guardrails (pre-briefs, guides, test connections) to prevent drop-off and data loss."
      },
      {
        title: "Patient‑Centered Market Research in Japan — A Practical Guide",
        filename: "Patient-Centered_Market_Research_in_Japan_by_Seed_Planning.pdf",
        category: "Patient Research",
        tags: ["recruitment","culture","informed consent","rare disease"],
        summary: "Culturally aware recruitment and moderation for Japan. Rapport, silence, and respect matter. Tips for rare and stigmatized conditions, partnering with PAGs, and designing consent and incentives that feel appropriate and transparent."
      },
      {
        title: "Understanding Oncology Dynamics in Japan",
        filename: "Understanding_Oncology_Dynamics_in_Japan_by_Seed_Planning.pdf",
        category: "Oncology Landscape",
        tags: ["organ‑based care","cancer centers","trials","KOL networks"],
        summary: "Why organ‑based departments (incl. surgery) often lead systemic therapy, and how designated cancer centers anchor care and research. Implications for recruiting oncologists, mapping referral flows, and tapping into KOL ecosystems."
      },
      {
        title: "Japan Annual Health Check‑Ups — What They Mean for Research (v2)",
        filename: "Japan_annual_health_check_up_insights_v2_by_Seed_Planning.pdf",
        category: "Screening & Checkups",
        tags: ["annual checkups","corporate programs","sampling"],
        summary: "High uptake of annual checkups and comprehensive screens. Useful for early‑detection and wellness topics, but be mindful of self‑report bias and limited continuity with primary care. Practical guidance for screener design and sample planning."
      },
      {
        title: "Japan Medical Research — Fieldwork Guide & Tips",
        filename: "Japan_medical_research_guide_and_tips_by_Seed_Planning.pdf",
        category: "Fieldwork & Moderation",
        tags: ["localization","moderation","screeners","translation"],
        summary: "Everything we wish overseas teams knew before fieldwork in Japan: local moderators, Japan‑specific screeners, disclosure around recording/privacy, and the level of detail needed in Japanese study materials to build trust and reduce drop‑outs."
      },
    ];

    // ---- Collect distinct tags ----
    const distinctTags = Array.from(new Set(docs.flatMap(d => d.tags))).sort();

    // ---- DOM refs ----
    const grid = document.getElementById("grid");
    const empty = document.getElementById("empty");
    const q = document.getElementById("q");
    const tagbar = document.getElementById("tagbar");

    // ---- Utils ----
    const fileUrl = (name) => basePath + encodeURIComponent(name);
    const escapeHtml = (s) => s.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}[m]));

    // ---- Tag UI ----
    const state = { query:"", tags: new Set() };

    function renderTags(){
      tagbar.innerHTML = "";
      distinctTags.forEach(t=>{
        const b = document.createElement("button");
        b.className = "chip";
        b.textContent = t;
        b.onclick = () => {
          if(state.tags.has(t)) state.tags.delete(t); else state.tags.add(t);
          b.classList.toggle("active");
          render();
        };
        tagbar.appendChild(b);
      });
    }

    // ---- Cards ----
    function render(){
      const qv = state.query.trim().toLowerCase();
      const activeTags = Array.from(state.tags);

      const filtered = docs.filter(d=>{
        const matchesText = !qv || (d.title + " " + d.category + " " + d.summary + " " + d.tags.join(" "))
          .toLowerCase().includes(qv);
        const matchesTags = activeTags.length === 0 || activeTags.every(t => d.tags.includes(t));
        return matchesText && matchesTags;
      });

      grid.innerHTML = "";
      filtered.forEach(d=>{
        const card = document.createElement("article");
        card.className = "card";
        card.setAttribute("role","listitem");
        card.innerHTML = `
          <div class="meta">
            <span class="pill">${escapeHtml(d.category)}</span>
          </div>
          <div class="title">${escapeHtml(d.title)}</div>
          <div class="summary">${escapeHtml(d.summary)}</div>
          <div class=\"actions\">
            ${d.site ? `<a class=\"btn\" href=\"${d.site}\" target=\"_blank\" rel=\"noopener\">📖 View Online</a>` : ""}
            <span class=\"btn secondary\" style=\"opacity: 0.5; cursor: not-allowed;\" title=\"PDF file not available\">⬇ PDF Not Available</span>
            <button class=\"btn secondary\" data-copy>Copy link</button>
          </div>
          <div class="category">${d.tags.map(t=>`#${escapeHtml(t)}`).join(" ")}</div>
        `;
        card.querySelector("[data-copy]").addEventListener("click", async ()=>{
          try{
            // If there's a site link, copy that; otherwise copy the page URL
            const linkToCopy = d.site || location.href;
            await navigator.clipboard.writeText(linkToCopy);
            const btn = card.querySelector("[data-copy]");
            btn.textContent = "Copied";
            setTimeout(()=>btn.textContent="Copy link", 1500);
          }catch(e){ alert("Copy failed"); }
        });
        grid.appendChild(card);
      });

      empty.style.display = filtered.length ? "none" : "block";
    }

    // ---- Events ----
    q.addEventListener("input", e=>{ state.query = e.target.value; render(); });

    // ---- Guide System ----
    const docIdMap = {
      "faq-guide": 0,
      "insurance-guide": 1,
      "pricing-guide": 2,
      "privacy-guide": 3,
      "patient-guide": 4,
      "oncology-guide": 5,
      "checkup-guide": 6,
      "fieldwork-guide": 7
    };

    let currentStep = 1;
    let selectedFocus = "";

    function showQuestion(step) {
      document.querySelectorAll('.question').forEach(q => q.classList.remove('active'));
      const targetQuestion = document.querySelector(`[data-step="${step}"]`);
      if (targetQuestion) {
        targetQuestion.classList.add('active');
        currentStep = step;
      }
    }

    function showRecommendations(recommendIds) {
      const recommendations = document.getElementById('recommendations');
      const recCards = document.getElementById('rec-cards');
      
      // Hide questions
      document.querySelectorAll('.question').forEach(q => q.classList.remove('active'));
      
      // Build recommendation cards
      const recHtml = recommendIds.map(id => {
        const docIndex = docIdMap[id];
        if (docIndex === undefined) return "";
        const doc = docs[docIndex];
        return `
          <div class="rec-card">
            <div class="rec-info">
              <h4>${escapeHtml(doc.title)}</h4>
              <p>${escapeHtml(doc.summary.slice(0, 120))}...</p>
            </div>
            <a class="btn" href="${fileUrl(doc.filename)}" target="_blank" rel="noopener">⬇ Download</a>
          </div>
        `;
      }).join('');
      
      recCards.innerHTML = recHtml;
      recommendations.classList.remove('hidden');
    }

    function resetGuide() {
      currentStep = 1;
      selectedFocus = "";
      document.getElementById('recommendations').classList.add('hidden');
      showQuestion(1);
      
      // Reset option visibility
      document.querySelectorAll('.options').forEach(opts => {
        opts.style.display = 'grid';
      });
    }

    function toggleGuide() {
      const guide = document.getElementById('guide');
      const toggleBtn = document.getElementById('guide-toggle');
      
      if (guide.style.display === 'none') {
        guide.style.display = 'block';
        toggleBtn.textContent = 'Hide Guide';
      } else {
        guide.style.display = 'none';
        toggleBtn.textContent = 'Show Guide';
      }
    }

    // Handle option clicks
    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('option-btn')) {
        const btn = e.target;
        const focus = btn.dataset.focus;
        const topic = btn.dataset.topic;
        const nextStep = btn.dataset.next;
        const recommend = btn.dataset.recommend;

        if (focus) {
          selectedFocus = focus;
          
          // Show/hide relevant options for next step
          document.querySelectorAll('.options').forEach(opts => {
            opts.style.display = 'none';
          });
          
          if (focus === 'patient-research') {
            document.querySelector('.patient-research-options').style.display = 'grid';
          } else if (focus === 'hcp-research') {
            document.querySelector('.hcp-research-options').style.display = 'grid';
          } else if (focus === 'system-overview') {
            document.querySelector('.system-overview-options').style.display = 'grid';
          } else if (focus === 'compliance') {
            document.querySelector('.compliance-options').style.display = 'grid';
          }
        }

        if (recommend) {
          const recommendIds = recommend.split(',');
          showRecommendations(recommendIds);
        } else if (nextStep) {
          showQuestion(parseInt(nextStep));
        }
      }
    });

    // ---- Init ----
    renderTags();
    render();
    
    // Initialize guide
    showQuestion(1);
  </script>
</body>
</html>
