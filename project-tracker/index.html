<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>プロジェクト履歴管理システム - ダッシュボード</title>
  <link rel="icon" type="image/png" href="SP_logo_shape%20only.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50">
  <!-- ナビゲーション -->
  <nav class="bg-white shadow-md sticky top-0 z-40">
    <div class="container mx-auto px-4 py-3">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-4">
          <img src="Seed_Planning_Logo_Original.jpg" alt="SEED PLANNING" class="h-10">
          <h1 class="text-lg font-bold text-gray-800">プロジェクト履歴管理システム</h1>
        </div>
        <div class="flex space-x-3">
          <a href="index.html" class="px-4 py-2 text-sm text-white rounded-lg transition" style="background-color: #1F7A85;">
            <i class="fas fa-home mr-2"></i>ダッシュボード
          </a>
          <a href="register.html" class="px-4 py-2 text-sm bg-green-500 text-white rounded-lg hover:bg-green-600 transition">
            <i class="fas fa-plus mr-2"></i>新規登録
          </a>
          <a href="projects.html" class="px-4 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition">
            <i class="fas fa-search mr-2"></i>案件検索
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- メインコンテンツ -->
  <div class="container mx-auto px-4 py-8">
    
    <!-- データインポート促進バナー -->
    <div id="importBanner" class="hidden bg-gradient-to-r from-purple-500 to-blue-600 text-white rounded-lg shadow-lg p-6 mb-8">
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-4">
          <i class="fas fa-database text-4xl"></i>
          <div>
            <h3 class="text-xl font-bold">データがまだインポートされていません</h3>
            <p class="text-sm opacity-90">Seed Planningの実績データ（113件）をインポートして、すぐに使い始めましょう！</p>
          </div>
        </div>
        <a href="import.html" class="bg-white text-purple-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition">
          <i class="fas fa-file-import mr-2"></i>今すぐインポート
        </a>
      </div>
    </div>

    <!-- 統計カードテンプレート -->
    <template id="statCardTemplate">
      <div class="rounded-lg shadow-md p-6 stat-card" style="background: linear-gradient(135deg, #E8F0F1 0%, #d5e5e7 100%);">
        <div class="flex items-center justify-between">
          <div>
            <p class="text-gray-500 text-sm stat-title"></p>
            <p class="text-3xl font-bold stat-value"></p>
          </div>
          <div class="icon-container rounded-full p-3">
            <i class="stat-icon text-2xl"></i>
          </div>
        </div>
      </div>
    </template>

    <!-- 統計カード表示エリア -->
    <div id="statCardsContainer" class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
      <!-- 統計カードがJavaScriptで動的に生成されます -->
    </div>

    <!-- 最近の案件 -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-8">
      <h2 class="text-xl font-bold mb-4 flex items-center">
        <i class="fas fa-clock mr-2 text-purple-600"></i>
        最近の案件（5件）
      </h2>
      <div class="overflow-x-auto">
        <table class="min-w-full">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">疾患名</th>
              <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">疾患略語</th>
              <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">対象者</th>
              <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">専門</th>
              <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">実績数</th>
              <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">クライアント</th>
              <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">登録日</th>
              <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">アクション</th>
            </tr>
          </thead>
          <tbody id="recentProjectsTable" class="bg-white divide-y divide-gray-200">
            <!-- 動的に生成 -->
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- 共通設定 -->
  <script src="js/config.js"></script>
  <script src="js/specialties.js"></script>
  <!-- API Client -->
  <script src="js/api.js"></script>
  <!-- Export helpers -->
  <script src="js/export.js"></script>

  <!-- ダッシュボードロジック -->
  <script>
    // 統計カードデータ
    const statsData = [
      { title: "総案件数", value: 0, color: "blue", icon: "fas fa-folder-open" },
      { title: "総リクルート人数", value: 0, color: "green", icon: "fas fa-users" },
      { title: "平均リクルート人数", value: 0, color: "purple", icon: "fas fa-chart-line" },
      { title: "今月の新規案件", value: 0, color: "orange", icon: "fas fa-calendar-plus" },
    ];

    // コンポーネントを生成
    function renderStatCards() {
      const container = document.querySelector('#statCardsContainer');
      const template = document.querySelector('#statCardTemplate');

      statsData.forEach(stat => {
        const clone = template.content.cloneNode(true);
        clone.querySelector('.stat-title').textContent = stat.title;
        clone.querySelector('.stat-value').textContent = stat.value;
        clone.querySelector('.icon-container').classList.add(`bg-${stat.color}-100`);
        clone.querySelector('.stat-icon').classList.add(stat.icon, `text-${stat.color}-600`);

        container.appendChild(clone);
      });
    }

    // ページ読み込み時に実行
    window.addEventListener('DOMContentLoaded', renderStatCards);
  </script>
</body>
</html>
