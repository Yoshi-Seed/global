# プロジェクト履歴管理システム (Seed Planning版)

医療系マーケットリサーチの案件情報を登録・管理し、過去の類似案件を検索できるWebアプリケーション  
**Seed Planningの実データ（113件）に完全対応**

## 🎯 主な機能

### 1. CSVデータ一括インポート
- Seed PlanningのCSVデータを自動インポート（113件）
- ワンクリックで全案件をデータベースに登録
- 手動CSVアップロードにも対応

### 2. 案件登録
- **疾患名** - リサーチ対象の疾患
- **疾患略語** - AD, T2DM, COPDなど
- **手法** - IDI, 会場調査など
- **調査種別** - 定性, 定量
- **対象者種別** - 医師 / 患者 / 介護者
- **専門** - 診療科（脳神経内科、精神科など）
- **実績数** - リクルート人数
- **対象条件** - スクリーニング条件の詳細
- **薬剤** - 調査対象の薬剤名
- **リクルート実施会社** - キャンドゥ、アスマークなど
- **クライアント** - The Link Groupなど
- **Project ID** - 任意・参照用

### 3. 強化された検索機能
- **疾患名** での検索
- **疾患略語** での検索（AD, T2DM等）
- **専門（診療科）** での検索
- **クライアント** での検索
- 対象者種別、リクルート人数範囲で絞り込み
- フリーワード検索（全項目対象）

### 4. 類似案件自動検索
改良されたアルゴリズムで類似案件を自動提案：
- 疾患名の完全一致: +50点
- 疾患略語の完全一致: +40点
- 対象者タイプ一致: +30点
- 専門（診療科）一致: +25点
- クライアント一致: +20点
- リクルート人数の近さ: 最大+15点
- 対象条件の類似度: スコアに応じて加算
- 薬剤の類似度: +8点/一致

### 5. ダッシュボード統計
- 総案件数、総リクルート人数、平均値
- 対象者タイプ別分布
- 疾患別分布
- 専門別分布
- クライアント別分布
- 最近の案件一覧

### 6. データエクスポート
- CSV形式（Excel対応）
- JSON形式（バックアップ/復元用）

## 🏗️ 技術構成

### 外部サービス不要
- データベースサーバー不要
- API不要
- ビルドプロセス不要
- **GitHub Pagesで即座にデプロイ可能**

### 技術スタック
- **HTML5** - セマンティックマークアップ
- **Tailwind CSS** - モダンなUIデザイン
- **Vanilla JavaScript** - 依存関係なし、純粋なJS
- **LocalStorage** - ブラウザのローカルストレージ活用
- **CSVパーサー** - カンマ・引用符を含むフィールドに対応

## 📁 ファイル構成

```
project-tracker/
├── index.html                  # ダッシュボード（統計表示）
├── import.html                 # CSVインポートページ ★NEW
├── register.html               # 案件登録フォーム
├── projects.html               # 一覧・検索・詳細表示
├── README.md                   # このファイル
├── seed_planning_data.csv      # Seed Planning実データ（113件）
├── js/
│   └── database.js             # データベース管理（v2.0対応）
├── css/                        # カスタムCSS（拡張用）
└── data/
    └── projects.json           # データスキーマ定義
```

## 🚀 使い方

### 1. セットアップ（ローカル環境）

```bash
# プロジェクトディレクトリに移動
cd project-tracker

# ブラウザで開く
open import.html

# または、HTTPサーバーを起動
python3 -m http.server 8080
# ブラウザで http://localhost:8080/import.html にアクセス
```

### 2. **Seed Planningデータのインポート**

#### ワンクリック自動インポート（推奨）
1. `import.html` にアクセス
2. 「Seed Planningデータを自動インポート」ボタンをクリック
3. 113件のデータが自動的にインポートされます
4. 「ダッシュボードへ」または「データを確認」をクリック

#### 手動CSVアップロード
1. `import.html` にアクセス
2. 「手動CSVアップロード」セクションでCSVファイルを選択
3. 「CSVファイルをインポート」ボタンをクリック

### 3. 案件を登録

1. **新規登録ページ**にアクセス
2. 必須項目を入力:
   - 疾患名
   - 対象者種別
   - 実績数（リクルート人数）
3. 任意項目を入力:
   - 疾患略語
   - 手法、調査種別
   - 専門（診療科）
   - 対象条件
   - 薬剤
   - リクルート実施会社
   - クライアント
   - Project ID（参照用）
4. 「案件を登録」ボタンをクリック

### 4. 案件を検索

1. **一覧表示ページ**にアクセス
2. 検索・フィルター条件を入力:
   - フリーワード検索（疾患名、疾患略語、専門、薬剤、クライアント等）
   - 対象者種別で絞り込み
   - 疾患名で絞り込み
   - 専門（診療科）で絞り込み
   - クライアントで絞り込み
   - リクルート人数範囲で絞り込み
3. 「フィルター適用」をクリック
4. 結果から案件をクリックして詳細表示

### 5. 類似案件を確認

1. 案件詳細画面を開く
2. 下部の「類似案件」セクションに自動表示
3. 類似度スコア付きで関連案件を確認
4. クリックして詳細を参照・比較

## 💾 データ構造

### Seed Planning CSVフォーマット
```csv
疾患名,疾患略語,手法,調査種別,対象者種別,専門,実績数,対象条件,薬剤,リクルート実施,クライアント
```

### データベーススキーマ
```javascript
{
  "projects": [
    {
      "id": "proj_1234567890_abc123",       // 内部ID
      "projectId": "PRJ-2025-001",           // 任意・参照用
      "diseaseName": "アルツハイマー型認知症", // 疾患名
      "diseaseAbbr": "AD",                   // 疾患略語
      "method": "IDI",                       // 手法
      "surveyType": "定性",                  // 調査種別
      "targetType": "医師",                  // 対象者種別
      "specialty": "脳神経内科",             // 専門
      "recruitCount": 10,                    // 実績数
      "targetConditions": "...",             // 対象条件
      "drug": "レカネマブ,レケンビ",         // 薬剤
      "recruitCompany": "キャンドゥ",        // リクルート実施
      "client": "Blue Matter Consulting",    // クライアント
      "createdAt": "2025-01-15T10:30:00Z",  // 登録日時
      "updatedAt": "2025-01-15T10:30:00Z",  // 更新日時
      "createdBy": "import"                  // 登録者
    }
  ],
  "lastUpdated": "2025-01-15T10:30:00Z",
  "version": "2.0.0"
}
```

## 🔍 検索のヒント

### 疾患名での検索
- 「アルツハイマー」→ アルツハイマー型認知症の案件を検索
- 「糖尿病」→ 2型糖尿病、糖尿病関連の案件を検索

### 疾患略語での検索
- 「AD」→ Alzheimer's Disease
- 「T2DM」→ Type 2 Diabetes Mellitus
- 「COPD」→ Chronic Obstructive Pulmonary Disease

### 専門（診療科）での検索
- 「脳神経内科」
- 「精神科」
- 「糖尿病内科」
- 「呼吸器内科」

### クライアントでの検索
- 「The Link Group」
- 「Blue Matter Consulting」
- 「Global Eyes Research」

## 📊 Seed Planningデータの内容

インポートされるデータには以下が含まれます：

- **113件**の実案件データ
- **20種類以上**の疾患カテゴリー
- **10社以上**のクライアント
- **複数のリクルート実施会社**
- **医師/患者/介護者**の多様な対象者

主な疾患カテゴリー：
- アルツハイマー型認知症/軽度認知障害
- 2型糖尿病
- COPD（慢性閉塞性肺疾患）
- 転移性乳がん
- クローン病
- アトピー性皮膚炎
- IgA腎症
- ADHD
- 鼻茸を伴う慢性副鼻腔炎
- その他多数

## 📤 データのバックアップ・復元

### バックアップ
1. ダッシュボードの「データエクスポート」ボタン
2. CSV または JSON形式を選択
3. ファイルをダウンロード

### 復元
1. `import.html` にアクセス
2. 手動CSVアップロードでバックアップファイルを選択
3. インポート実行

または、ブラウザコンソールで：
```javascript
// JSONファイルの内容を貼り付け
const backupData = { /* ... */ };
db.importFromJSON(JSON.stringify(backupData));
location.reload();
```

## ⚠️ 注意事項

### データ保存
- データはブラウザのLocalStorageに保存されます
- ブラウザのデータを削除すると案件履歴も削除されます
- 定期的にエクスポート機能でバックアップを推奨

### 容量制限
- LocalStorageは通常5-10MBの容量制限
- Seed Planningデータ（113件）は問題なく保存可能
- 数千件の案件まで保存可能

### ブラウザ対応
- Chrome、Firefox、Safari、Edge等のモダンブラウザ
- LocalStorageが有効である必要があります

## 🆕 Version 2.0の新機能

- ✅ Seed Planning実データ対応（113件）
- ✅ CSVインポート機能
- ✅ 疾患略語検索
- ✅ 専門（診療科）検索
- ✅ クライアント検索・表示
- ✅ Project IDを任意項目に変更
- ✅ 改良された類似案件検索アルゴリズム
- ✅ より詳細な対象条件管理
- ✅ 薬剤情報の追加
- ✅ リクルート実施会社の追加

## 🔧 トラブルシューティング

### CSVインポートが失敗する
- ファイル形式がUTF-8であることを確認
- 必須列（疾患名、対象者種別、実績数）が含まれているか確認

### データが表示されない
- `import.html` でデータをインポート済みか確認
- ブラウザのLocalStorageが有効か確認
- ブラウザのコンソールでエラーを確認

### 類似案件が表示されない
- データが2件以上登録されているか確認
- 疾患名や条件が大きく異なる場合は表示されません

## 📝 今後の拡張予定

- [ ] 案件編集機能
- [ ] 高度なフィルター（複数条件のAND/OR検索）
- [ ] タグ機能
- [ ] 案件ステータス管理（進行中/完了/中止）
- [ ] 複数ユーザー対応（認証機能）
- [ ] クラウド同期機能

## 📄 ライセンス

MIT License - 自由に使用・改変・再配布可能

## 🤝 貢献

Issue、Pull Requestを歓迎します！

---

**開発**: Seed Planning Research Team  
**バージョン**: 2.0.0  
**最終更新**: 2025-10-19  
**データ**: Seed Planning実績データ（113件）
