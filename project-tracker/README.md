# プロジェクト履歴管理システム

医療系マーケットリサーチのプロジェクト情報を登録・管理し、過去の類似案件を検索できるWebアプリケーション

## 🎯 主な機能

### 1. プロジェクト登録
- **Project ID**: プロジェクトの一意識別子
- **対象者タイプ**: 医師 / 患者 / 医師・患者
- **疾患・テーマ**: リサーチ対象の疾患や調査テーマ
- **リクルート人数**: 目標リクルート数
- **スクリーニング条件**: 対象者の条件（診療科、年齢、経験年数など）
- **フリーコメント**: 補足情報や特記事項

### 2. データ自動蓄積
- プロジェクトを登録すると、自動的にローカルストレージに保存
- ブラウザを閉じてもデータは保持される
- 履歴は時系列で蓄積され、検索・参照が可能

### 3. 類似案件検索
- 疾患・テーマの類似度を自動計算
- 対象者タイプ、リクルート人数、スクリーニング条件から類似案件を提案
- 過去の類似プロジェクトの条件を参照可能

### 4. 高度な検索・フィルター
- **フリーワード検索**: Project ID、疾患名、コメントから検索
- **対象者タイプ別フィルター**: 医師/患者/両方で絞り込み
- **リクルート人数範囲**: 最小〜最大人数で絞り込み
- **ソート機能**: 登録日順、リクルート人数順でソート

### 5. ダッシュボード統計
- 総プロジェクト数
- 総リクルート人数
- 平均リクルート人数
- 対象者タイプ別分布
- 疾患テーマTop5
- 最近のプロジェクト一覧

### 6. データエクスポート
- **CSV形式**: Excel等で開けるCSVファイル出力
- **JSON形式**: データのバックアップ用JSON出力

## 🏗️ 技術構成

### フロントエンド
- **HTML5 + CSS3**: セマンティックなマークアップ
- **Tailwind CSS**: モダンなUIデザイン
- **Vanilla JavaScript**: 依存関係なしのピュアJS実装
- **Font Awesome**: アイコンライブラリ

### データストレージ
- **LocalStorage**: ブラウザのローカルストレージを利用
- **JSON形式**: 構造化データとして保存
- 外部データベース不要で完全にオフライン動作可能

### 特徴
- ✅ **外部サービス不要**: データベースサーバー不要
- ✅ **GitHub Pages対応**: 静的ホスティングで即座にデプロイ可能
- ✅ **オフライン動作**: インターネット接続不要で動作
- ✅ **シンプル構成**: 複雑な設定やビルドプロセス不要

## 📁 プロジェクト構造

```
project-tracker/
├── index.html              # ダッシュボード（統計表示）
├── register.html           # プロジェクト登録フォーム
├── projects.html           # 一覧表示・検索・詳細表示
├── README.md               # このファイル
├── js/
│   └── database.js         # データベース管理ロジック
├── css/                    # カスタムCSS（必要に応じて）
└── data/
    └── projects.json       # データスキーマ定義（参考用）
```

## 🚀 使い方

### 1. セットアップ（ローカル環境）

```bash
# プロジェクトをクローン
git clone [リポジトリURL]
cd project-tracker

# ブラウザで開く（HTTPサーバー不要）
# index.htmlをダブルクリック、または
open index.html
```

### 2. GitHub Pagesでホスティング

```bash
# GitHubリポジトリにプッシュ
git add .
git commit -m "Add project tracker"
git push origin main

# GitHub Settings > Pages で以下を設定:
# - Source: Deploy from a branch
# - Branch: main / project-tracker
# - 数分後に https://[username].github.io/[repo]/project-tracker/ でアクセス可能
```

### 3. プロジェクト登録

1. **新規登録ページ**にアクセス
2. 必須項目を入力:
   - Project ID（例: PRJ-2025-001）
   - 対象者タイプ（医師/患者/両方）
   - 疾患・テーマ
   - リクルート人数
   - スクリーニング条件（複数追加可能）
3. フリーコメントに補足情報を記入（任意）
4. 「プロジェクトを登録」ボタンをクリック

### 4. プロジェクト検索

1. **一覧表示ページ**にアクセス
2. 検索・フィルター条件を入力:
   - フリーワード検索
   - 対象者タイプで絞り込み
   - リクルート人数範囲で絞り込み
3. 「フィルター適用」をクリック
4. 結果からプロジェクトをクリックして詳細表示

### 5. 類似案件参照

1. プロジェクト詳細画面を開く
2. 下部の「類似プロジェクト」セクションに自動表示
3. 類似度スコアで並び替えられた関連案件を参照
4. 過去のスクリーニング条件を確認して再利用可能

## 💾 データ構造

```javascript
{
  "projects": [
    {
      "id": "proj_1234567890_abc123",           // 内部ID
      "projectId": "PRJ-2025-001",               // Project ID
      "targetType": "医師",                       // 対象者タイプ
      "diseaseTheme": "糖尿病治療における...",    // 疾患・テーマ
      "recruitCount": 50,                        // リクルート人数
      "screeningConditions": {                   // スクリーニング条件
        "specialty": "内科・糖尿病内科",
        "experience": "5年以上",
        "patientCount": "月20名以上"
      },
      "freeComment": "特に2型糖尿病の...",       // フリーコメント
      "createdAt": "2025-01-15T10:30:00Z",      // 登録日時
      "updatedAt": "2025-01-15T10:30:00Z",      // 更新日時
      "createdBy": "admin"                       // 担当者
    }
  ],
  "lastUpdated": "2025-01-15T10:30:00Z",
  "version": "1.0.0"
}
```

## 🔍 類似案件検索アルゴリズム

システムは以下の要素を組み合わせて類似度を計算：

1. **対象者タイプ一致** (+30点): 同じ対象者タイプ
2. **疾患・テーマ類似度** (最大+40点): 単語の一致数
3. **リクルート人数近似** (最大+15点): 人数差が小さいほど高得点
4. **スクリーニング条件類似度** (最大+15点): 条件項目の一致数

類似度スコアが高い順に最大5件を表示

## 📊 サンプルデータ

初回起動時に3件のサンプルプロジェクトが自動登録されます：

1. **糖尿病治療**: 医師50名、内科・糖尿病内科
2. **乳がんQOL調査**: 患者100名、40-65歳女性
3. **アトピー性皮膚炎**: 医師・患者80名、ペアリクルート

サンプルデータは削除・編集可能です。

## 🔧 カスタマイズ

### サンプルデータを無効化

`js/database.js`の`initializeSampleData()`関数をコメントアウト:

```javascript
async initializeSampleData() {
  // const sampleData = { ... };
  // localStorage.setItem(this.storageKey, JSON.stringify(sampleData));
  return { projects: [], lastUpdated: null, version: '1.0.0' };
}
```

### デザインカスタマイズ

Tailwind CSSを使用しているため、HTMLファイル内のクラス名を変更するだけでカスタマイズ可能:

```html
<!-- 例: ボタンの色を変更 -->
<button class="bg-blue-600 hover:bg-blue-700">
  ↓
<button class="bg-green-600 hover:bg-green-700">
```

## 📤 データのバックアップ・復元

### バックアップ

1. ダッシュボードの「データエクスポート」ボタンをクリック
2. JSON形式を選択
3. `projects_export.json`がダウンロードされる

### 復元

ブラウザのコンソールで以下を実行:

```javascript
// JSONファイルの内容を貼り付け
const backupData = { /* ... */ };
db.importFromJSON(JSON.stringify(backupData));
location.reload(); // ページをリロード
```

## ⚠️ 注意事項

### データ保存について
- データはブラウザのLocalStorageに保存されます
- ブラウザのデータを削除するとプロジェクト履歴も削除されます
- 定期的にエクスポート機能でバックアップを取ることを推奨

### ブラウザ対応
- Chrome、Firefox、Safari、Edge等のモダンブラウザに対応
- LocalStorageが有効である必要があります

### データ容量制限
- LocalStorageは通常5-10MBの容量制限があります
- 数千件のプロジェクトまで保存可能ですが、定期的な整理を推奨

## 🛠️ トラブルシューティング

### データが保存されない
- ブラウザのLocalStorageが有効か確認
- プライベートブラウジングモードでは使用不可
- ブラウザのストレージ容量を確認

### 類似案件が表示されない
- プロジェクトが2件以上登録されているか確認
- 疾患・テーマや条件が大きく異なる場合は表示されません

### CSVエクスポートが文字化けする
- Excelで開く際は、インポート時に「UTF-8」を指定
- Googleスプレッドシートは自動でUTF-8を認識します

## 📝 今後の拡張予定

- [ ] プロジェクト編集機能
- [ ] 複数条件での高度な検索
- [ ] タグ機能
- [ ] プロジェクトステータス管理（進行中/完了/中止）
- [ ] 複数ユーザー対応（認証機能）
- [ ] クラウド同期機能

## 📄 ライセンス

MIT License - 自由に使用・改変・再配布可能

## 🤝 貢献

Issue、Pull Requestを歓迎します！

---

**開発者**: Seed Planning Research Team  
**バージョン**: 1.0.0  
**最終更新**: 2025-10-19
