<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>海外クライアント売上分析インフォグラフィック</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Helvetica Neue', 'Arial', 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', 'Meiryo', sans-serif;
            background-color: #f0f4f8;
            color: #333;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: auto;
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 25px;
        }
        .card {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.08);
            padding: 25px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.12);
        }
        .header {
            grid-column: 1 / -1;
            text-align: center;
            border-bottom: 3px solid #e0e0e0;
            padding-bottom: 20px;
        }
        .header h1 {
            font-size: 2.8em;
            color: #1c3d5a;
            margin: 0;
            font-weight: 700;
        }
        .header p {
            font-size: 1.3em;
            color: #555;
            margin-top: 10px;
        }
        .card-title {
            font-size: 1.5em;
            color: #005a70;
            margin-top: 0;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
        }
        /* Grid Layout */
        .card-full { grid-column: 1 / -1; }
        .card-half { grid-column: span 6; }
        .card-third { grid-column: span 4; }
        .card-two-third { grid-column: span 8; }

        .kpi-container {
            display: flex;
            justify-content: space-around;
            text-align: center;
        }
        .kpi-item {
            flex: 1;
        }
        .kpi-value {
            font-size: 3em;
            font-weight: 700;
            color: #2e7d32;
        }
        .kpi-value.orange { color: #f57c00; }
        .kpi-label {
            font-size: 1.1em;
            color: #666;
            margin-top: 5px;
        }
        .chart-container {
            position: relative;
            height: 350px;
            width: 100%;
        }
        @media (max-width: 992px) {
            .card-half, .card-third, .card-two-third {
                grid-column: 1 / -1;
            }
        }
        @media (max-width: 600px) {
            .header h1 { font-size: 2em; }
            .header p { font-size: 1.1em; }
            .card-title { font-size: 1.3em; }
            .kpi-value { font-size: 2.2em; }
            .kpi-label { font-size: 1em; }
        }
    </style>
</head>
<body>

    <div class="container">
        <header class="header">
            <h1>海外事業 成長分析インフォグラフィック</h1>
            <p>38期～43期データに基づく事業トレンド可視化</p>
        </header>

        <!-- 全体売上推移 -->
        <div class="card card-full">
            <h2 class="card-title">全体売上の急成長 (38期-42期)</h2>
            <div class="chart-container" style="height: 300px;">
                <canvas id="totalSalesChart"></canvas>
            </div>
        </div>

        <!-- クライアント構成の変化 -->
        <div class="card card-half">
            <h2 class="card-title">クライアント構成の変化: 38期</h2>
            <div class="chart-container">
                <canvas id="clientComposition38"></canvas>
            </div>
        </div>
        <div class="card card-half">
            <h2 class="card-title">クライアント構成の変化: 42期</h2>
            <div class="chart-container">
                <canvas id="clientComposition42"></canvas>
            </div>
        </div>

        <!-- 二大クライアントの成長 -->
        <div class="card card-two-third">
            <h2 class="card-title">二大クライアントの成長軌道 (38期-42期)</h2>
            <div class="chart-container">
                <canvas id="topClientsGrowthChart"></canvas>
            </div>
        </div>

        <!-- 43期ヘルスチェック -->
        <div class="card card-third">
            <h2 class="card-title">43期 ヘルスチェック (3-7月)</h2>
            <div class="kpi-container">
                <div class="kpi-item">
                    <div class="kpi-value">+51.3%</div>
                    <div class="kpi-label">Holden (vs 42期同期)</div>
                </div>
                <div class="kpi-item">
                    <div class="kpi-value orange">+16.4%</div>
                    <div class="kpi-label">The Link Group (vs 42期同期)</div>
                </div>
            </div>
        </div>
        
        <!-- 事業の季節性 -->
        <div class="card card-full">
            <h2 class="card-title">事業の季節性：月次平均売上 (38-42期)</h2>
            <div class="chart-container" style="height: 300px;">
                <canvas id="seasonalityChart"></canvas>
            </div>
        </div>
    </div>

<script>
// Chart.jsのデフォルト設定
Chart.defaults.font.family = "'Helvetica Neue', 'Arial', 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', 'Meiryo', sans-serif";
Chart.defaults.plugins.tooltip.titleFont.size = 14;
Chart.defaults.plugins.tooltip.bodyFont.size = 12;
Chart.defaults.plugins.tooltip.callbacks.label = function(context) {
    let label = context.dataset.label || '';
    if (label) {
        label += ': ';
    }
    if (context.parsed.y !== null) {
        label += new Intl.NumberFormat('ja-JP', { style: 'currency', currency: 'JPY' }).format(context.parsed.y);
    }
    return label;
};

// 1. 全体売上推移
const totalSalesCtx = document.getElementById('totalSalesChart').getContext('2d');
new Chart(totalSalesCtx, {
    type: 'bar',
    data: {
        labels: ['38期', '39期', '40期', '41期', '42期'],
        datasets: [{
            label: '年間売上 (百万円)',
            data: [64.36, 114.34, 158.18, 215.96, 260.17],
            backgroundColor: 'rgba(28, 61, 90, 0.7)',
            borderColor: 'rgba(28, 61, 90, 1)',
            borderWidth: 1,
            borderRadius: 4,
        }]
    },
    options: {
        maintainAspectRatio: false,
        scales: {
            y: {
                beginAtZero: true,
                title: { display: true, text: '売上 (百万円)' }
            }
        },
        plugins: {
            legend: { display: false },
            tooltip: {
                callbacks: {
                    label: function(context) {
                        return `売上: ${context.parsed.y} 百万円`;
                    }
                }
            }
        }
    }
});

// 2. クライアント構成 (38期)
const clientComposition38Ctx = document.getElementById('clientComposition38').getContext('2d');
new Chart(clientComposition38Ctx, {
    type: 'doughnut',
    data: {
        labels: ['PSL Group', 'Holden', 'シタシオンジャパン', 'その他'],
        datasets: [{
            data: [41.1, 26.8, 17.4, 14.7],
            backgroundColor: ['#0d47a1', '#1976d2', '#42a5f5', '#90caf9'],
        }]
    },
    options: {
        maintainAspectRatio: false,
        plugins: {
            legend: { position: 'bottom' },
            tooltip: {
                callbacks: {
                    label: function(context) {
                        return `${context.label}: ${context.parsed}%`;
                    }
                }
            }
        }
    }
});

// 3. クライアント構成 (42期)
const clientComposition42Ctx = document.getElementById('clientComposition42').getContext('2d');
new Chart(clientComposition42Ctx, {
    type: 'doughnut',
    data: {
        labels: ['The Link Group', 'Holden', 'The Planning Shop', 'その他'],
        datasets: [{
            data: [38.2, 34.9, 7.7, 19.2],
            backgroundColor: ['#2e7d32', '#4caf50', '#81c784', '#c8e6c9'],
        }]
    },
    options: {
        maintainAspectRatio: false,
        plugins: {
            legend: { position: 'bottom' },
            tooltip: {
                callbacks: {
                    label: function(context) {
                        return `${context.label}: ${context.parsed}%`;
                    }
                }
            }
        }
    }
});

// 4. 二大クライアントの成長
const topClientsGrowthCtx = document.getElementById('topClientsGrowthChart').getContext('2d');
new Chart(topClientsGrowthCtx, {
    type: 'bar',
    data: {
        labels: ['38期', '39期', '40期', '41期', '42期'],
        datasets: [
            {
                label: 'Holden',
                data: [1727, 1161, 6055, 8000, 9090], // 万円単位
                backgroundColor: 'rgba(25, 118, 210, 0.7)',
                borderColor: 'rgba(25, 118, 210, 1)',
                yAxisID: 'y',
            },
            {
                label: 'The Link Group',
                data: [0, 4944, 4944, 8000, 9936], // 万円単位
                backgroundColor: 'rgba(76, 175, 80, 0.7)',
                borderColor: 'rgba(76, 175, 80, 1)',
                yAxisID: 'y',
            }
        ]
    },
    options: {
        maintainAspectRatio: false,
        scales: {
            x: { stacked: true },
            y: {
                stacked: true,
                beginAtZero: true,
                title: { display: true, text: '売上 (万円)' }
            }
        },
        plugins: {
            legend: { position: 'bottom' },
            tooltip: {
                callbacks: {
                    label: function(context) {
                        return `${context.dataset.label}: ${new Intl.NumberFormat('ja-JP').format(context.parsed.y)} 万円`;
                    }
                }
            }
        }
    }
});

// 5. 事業の季節性
const seasonalityCtx = document.getElementById('seasonalityChart').getContext('2d');
new Chart(seasonalityCtx, {
    type: 'bar',
    data: {
        labels: ['3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月', '1月', '2月'],
        datasets: [{
            label: '月次平均売上 (万円)',
            data: [1728, 1481, 1590, 1301, 1455, 1098, 1123, 1678, 1554, 1890, 1987, 2012], // 万円単位
            backgroundColor: (context) => {
                const value = context.raw;
                if (value > 1800) return 'rgba(211, 47, 47, 0.7)'; // 最繁忙期
                if (value > 1480) return 'rgba(245, 124, 0, 0.7)'; // ピーク期
                return 'rgba(27, 94, 32, 0.7)'; // 通常・オフピーク
            },
            borderColor: (context) => {
                const value = context.raw;
                if (value > 1800) return 'rgba(211, 47, 47, 1)';
                if (value > 1480) return 'rgba(245, 124, 0, 1)';
                return 'rgba(27, 94, 32, 1)';
            },
            borderWidth: 1,
            borderRadius: 4,
        }]
    },
    options: {
        maintainAspectRatio: false,
        scales: {
            y: {
                beginAtZero: true,
                title: { display: true, text: '平均売上 (万円)' }
            }
        },
        plugins: {
            legend: { display: false },
             tooltip: {
                callbacks: {
                    label: function(context) {
                        return `平均売上: ${new Intl.NumberFormat('ja-JP').format(context.parsed.y)} 万円`;
                    }
                }
            }
        }
    }
});
</script>

</body>
</html>
