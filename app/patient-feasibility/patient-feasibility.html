<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>æ‚£è€…ãƒªã‚¯ãƒ«ãƒ¼ãƒˆå¯èƒ½æ€§ãƒã‚§ãƒƒã‚«ãƒ¼ | Patient Recruitment Feasibility</title>
  <style>
    :root {
      --canvas-bg: #f5f0e8;
      --canvas-light: #faf7f2;
      --brown-dark: #3d2b1f;
      --brown-medium: #5d4037;
      --brown-light: #8d6e63;
      --accent-green: #4caf50;
      --accent-orange: #ff9800;
      --accent-red: #f44336;
      --accent-blue: #2196f3;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Sans', 'Noto Sans JP', sans-serif;
      background: var(--canvas-bg);
      color: var(--brown-dark);
      min-height: 100vh;
      line-height: 1.6;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
    }

    header {
      text-align: center;
      padding: 30px 0;
      border-bottom: 2px solid var(--brown-light);
      margin-bottom: 30px;
    }

    h1 {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--brown-dark);
      margin-bottom: 8px;
    }

    .subtitle {
      font-size: 0.9rem;
      color: var(--brown-medium);
    }

    .search-section {
      position: relative;
      margin-bottom: 30px;
    }

    .search-input {
      width: 100%;
      padding: 18px 20px;
      font-size: 1.1rem;
      border: 2px solid var(--brown-light);
      border-radius: 12px;
      background: var(--canvas-light);
      color: var(--brown-dark);
      outline: none;
      transition: border-color 0.3s, box-shadow 0.3s;
    }

    .search-input:focus {
      border-color: var(--brown-dark);
      box-shadow: 0 4px 12px rgba(61, 43, 31, 0.15);
    }

    .search-input::placeholder {
      color: var(--brown-light);
    }

    .search-hint {
      font-size: 0.8rem;
      color: var(--brown-light);
      margin-top: 8px;
      padding: 0 5px;
    }

    .suggestions {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: var(--canvas-light);
      border: 2px solid var(--brown-light);
      border-top: none;
      border-radius: 0 0 12px 12px;
      max-height: 300px;
      overflow-y: auto;
      z-index: 100;
      display: none;
      box-shadow: 0 8px 20px rgba(61, 43, 31, 0.2);
    }

    .suggestions.active {
      display: block;
    }

    .suggestion-item {
      padding: 15px 20px;
      cursor: pointer;
      border-bottom: 1px solid rgba(141, 110, 99, 0.2);
      transition: background 0.2s;
    }

    .suggestion-item:hover,
    .suggestion-item.selected {
      background: rgba(141, 110, 99, 0.15);
    }

    .suggestion-item:last-child {
      border-bottom: none;
    }

    .suggestion-name {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .suggestion-english {
      font-size: 0.85rem;
      color: var(--brown-medium);
    }

    .suggestion-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 6px;
      font-size: 0.8rem;
    }

    .suggestion-icd {
      background: var(--brown-light);
      color: white;
      padding: 2px 8px;
      border-radius: 10px;
    }

    .suggestion-count {
      color: var(--brown-medium);
      font-weight: 500;
    }

    .result-card {
      background: var(--canvas-light);
      border-radius: 16px;
      padding: 25px;
      box-shadow: 0 4px 20px rgba(61, 43, 31, 0.1);
      display: none;
    }

    .result-card.active {
      display: block;
    }

    .disease-header {
      text-align: center;
      padding-bottom: 20px;
      border-bottom: 2px solid var(--brown-light);
      margin-bottom: 20px;
    }

    .disease-name {
      font-size: 1.4rem;
      font-weight: 700;
      color: var(--brown-dark);
      margin-bottom: 8px;
    }

    .disease-english {
      font-size: 1rem;
      color: var(--brown-medium);
      margin-bottom: 8px;
    }

    .icd-code {
      display: inline-block;
      background: var(--brown-light);
      color: white;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
    }

    .patient-count-section {
      text-align: center;
      padding: 25px;
      background: rgba(141, 110, 99, 0.1);
      border-radius: 12px;
      margin-bottom: 20px;
    }

    .patient-label {
      font-size: 1rem;
      color: var(--brown-medium);
      margin-bottom: 8px;
    }

    .patient-number {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--brown-dark);
    }

    .patient-unit {
      font-size: 1.2rem;
      color: var(--brown-medium);
    }

    .recruitment-section {
      margin-bottom: 20px;
    }

    .recruitment-box {
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 15px;
    }

    .recruitment-box.green {
      background: rgba(76, 175, 80, 0.15);
      border-left: 5px solid var(--accent-green);
    }

    .recruitment-box.orange {
      background: rgba(255, 152, 0, 0.15);
      border-left: 5px solid var(--accent-orange);
    }

    .recruitment-box.red {
      background: rgba(244, 67, 54, 0.15);
      border-left: 5px solid var(--accent-red);
    }

    .recruitment-title {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .recruitment-title .icon {
      font-size: 1.3rem;
    }

    .recruitment-message {
      font-size: 1rem;
      line-height: 1.7;
      margin-bottom: 15px;
    }

    .recruitment-english {
      font-size: 0.9rem;
      color: var(--brown-medium);
      line-height: 1.6;
      padding-top: 12px;
      border-top: 1px dashed var(--brown-light);
    }

    .alert-box {
      padding: 15px 20px;
      border-radius: 12px;
      margin-bottom: 15px;
      display: none;
    }

    .alert-box.active {
      display: block;
    }

    .alert-box.warning {
      background: rgba(255, 152, 0, 0.2);
      border: 2px solid var(--accent-orange);
    }

    .alert-box.danger {
      background: rgba(244, 67, 54, 0.2);
      border: 2px solid var(--accent-red);
    }

    .alert-box.social {
      background: rgba(156, 39, 176, 0.15);
      border: 2px solid #9c27b0;
    }

    .alert-title {
      font-size: 1rem;
      font-weight: 700;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .alert-message {
      font-size: 0.95rem;
      line-height: 1.6;
    }

    .recruitment-estimate {
      text-align: center;
      padding: 20px;
      background: var(--brown-dark);
      color: var(--canvas-light);
      border-radius: 12px;
      margin-top: 20px;
    }

    .estimate-label {
      font-size: 0.9rem;
      margin-bottom: 8px;
      opacity: 0.9;
    }

    .estimate-number {
      font-size: 2rem;
      font-weight: 700;
    }

    .reset-btn {
      display: block;
      width: 100%;
      padding: 15px;
      margin-top: 25px;
      background: var(--brown-medium);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s;
    }

    .reset-btn:hover {
      background: var(--brown-dark);
    }

    /* Severity Warning Styles */
    .alert-box.severity {
      background: rgba(33, 150, 243, 0.15);
      border: 2px solid var(--accent-blue);
    }

    /* Past Records Styles */
    .history-section {
      margin-top: 20px;
      padding-top: 20px;
      border-top: 2px dashed var(--brown-light);
    }

    .history-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: linear-gradient(135deg, #4caf50, #2e7d32);
      color: white;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
      margin-bottom: 15px;
    }

    .history-badge:hover {
      transform: scale(1.02);
      box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
    }

    .history-summary {
      background: rgba(76, 175, 80, 0.1);
      border-radius: 12px;
      padding: 15px;
      margin-bottom: 15px;
    }

    .history-summary-title {
      font-weight: 700;
      margin-bottom: 10px;
      color: var(--brown-dark);
    }

    .history-stats {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
    }

    .history-stat {
      background: white;
      padding: 8px 12px;
      border-radius: 8px;
      font-size: 0.9rem;
    }

    .history-stat-label {
      color: var(--brown-medium);
      font-size: 0.8rem;
    }

    .history-stat-value {
      font-weight: 700;
      color: var(--brown-dark);
    }

    .history-detail-btn {
      display: block;
      width: 100%;
      padding: 12px;
      background: var(--accent-blue);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s;
    }

    .history-detail-btn:hover {
      background: #1976d2;
    }

    /* Modal Styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.6);
      z-index: 1000;
      display: none;
      justify-content: center;
      align-items: flex-start;
      padding: 20px;
      overflow-y: auto;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal-content {
      background: var(--canvas-light);
      border-radius: 16px;
      max-width: 600px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      margin-top: 20px;
    }

    .modal-header {
      padding: 20px;
      border-bottom: 2px solid var(--brown-light);
      position: sticky;
      top: 0;
      background: var(--canvas-light);
      z-index: 10;
    }

    .modal-title {
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--brown-dark);
      margin-bottom: 5px;
    }

    .modal-subtitle {
      font-size: 0.9rem;
      color: var(--brown-medium);
    }

    .modal-close {
      position: absolute;
      top: 15px;
      right: 15px;
      background: var(--brown-light);
      color: white;
      border: none;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      font-size: 1.2rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-body {
      padding: 20px;
    }

    .history-card {
      background: white;
      border-radius: 12px;
      padding: 15px;
      margin-bottom: 15px;
      border-left: 4px solid var(--accent-blue);
    }

    .history-card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 10px;
    }

    .history-card-date {
      font-size: 0.85rem;
      color: var(--brown-medium);
    }

    .history-card-count {
      background: var(--accent-green);
      color: white;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 0.85rem;
      font-weight: 600;
    }

    .history-card-method {
      display: inline-block;
      background: var(--brown-light);
      color: white;
      padding: 2px 8px;
      border-radius: 8px;
      font-size: 0.8rem;
      margin-bottom: 8px;
    }

    .history-card-condition {
      font-size: 0.9rem;
      color: var(--brown-dark);
      line-height: 1.5;
      margin-bottom: 10px;
      padding: 10px;
      background: rgba(141, 110, 99, 0.08);
      border-radius: 8px;
    }

    .history-card-meta {
      font-size: 0.8rem;
      color: var(--brown-medium);
    }

    .no-history {
      text-align: center;
      padding: 20px;
      color: var(--brown-medium);
    }

    footer {
      text-align: center;
      padding: 30px 20px;
      color: var(--brown-light);
      font-size: 0.85rem;
    }

    .for-hayato {
      font-style: italic;
      margin-top: 10px;
    }

    @media (max-width: 480px) {
      .container {
        padding: 15px;
      }

      h1 {
        font-size: 1.3rem;
      }

      .search-input {
        font-size: 1rem;
        padding: 15px;
      }

      .patient-number {
        font-size: 2rem;
      }

      .disease-name {
        font-size: 1.2rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>æ‚£è€…ãƒªã‚¯ãƒ«ãƒ¼ãƒˆå¯èƒ½æ€§ãƒã‚§ãƒƒã‚«ãƒ¼</h1>
      <p class="subtitle">Patient Recruitment Feasibility Checker</p>
    </header>

    <div class="search-section">
      <input 
        type="text" 
        class="search-input" 
        id="searchInput" 
        placeholder="NSCLC, cancer lung, ç³–å°¿ç—…..."
        autocomplete="off"
      >
      <div class="search-hint" id="searchHint">
        ğŸ’¡ ç•¥èªOK: NSCLC, COPD, T2DM, RA, CKD... | è¤‡æ•°ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰: cancer prostate
      </div>
      <div class="suggestions" id="suggestions"></div>
    </div>

    <div class="result-card" id="resultCard">
      <div class="disease-header">
        <div class="disease-name" id="diseaseName"></div>
        <div class="disease-english" id="diseaseEnglish"></div>
        <span class="icd-code" id="icdCode"></span>
      </div>

      <div class="patient-count-section">
        <div class="patient-label">æ—¥æœ¬ã®æ¨å®šæ‚£è€…æ•° / Estimated Patients in Japan</div>
        <div class="patient-number" id="patientNumber"></div>
        <div class="patient-unit">äºº / patients</div>
      </div>

      <div class="alert-box social" id="socialAlert">
        <div class="alert-title">
          <span>âš ï¸</span>
          <span>ç¤¾ä¼šçš„é…æ…®ãŒå¿…è¦ãªç–¾æ‚£ / Socially Sensitive Condition</span>
        </div>
        <div class="alert-message" id="socialMessage"></div>
      </div>

      <div class="alert-box severity" id="severityAlert">
        <div class="alert-title">
          <span>ğŸ“Š</span>
          <span>é‡ç—‡åº¦ã«é–¢ã™ã‚‹æ³¨æ„ / Severity Note</span>
        </div>
        <div class="alert-message" id="severityMessage"></div>
      </div>

      <div class="history-section" id="historySection" style="display: none;">
        <div class="history-badge" onclick="showHistoryModal()">
          ğŸ“‹ éå»ã®ãƒªã‚¯ãƒ«ãƒ¼ãƒˆå®Ÿç¸¾ã‚ã‚Š / Past recruitment records available
        </div>
        <div class="history-summary" id="historySummary"></div>
        <button class="history-detail-btn" onclick="showHistoryModal()">
          è©³ç´°ã‚’ç¢ºèª / View Details â†’
        </button>
      </div>

      <div class="recruitment-section" id="recruitmentSection">
        <!-- Will be populated by JavaScript -->
      </div>

      <div class="recruitment-estimate">
        <div class="estimate-label">æ¨å®šãƒªã‚¯ãƒ«ãƒ¼ãƒˆå¯èƒ½æ•° / Est. Recruitable</div>
        <div class="estimate-number" id="estimateNumber"></div>
      </div>

      <button class="reset-btn" onclick="resetSearch()">
        åˆ¥ã®ç–¾æ‚£ã‚’æ¤œç´¢ / Search Another Disease
      </button>
    </div>

    <footer>
      <div>Â© 2025 PMRC Patient Feasibility Tool</div>
      <div class="for-hayato">For é§¿äººå› ğŸ¯</div>
    </footer>
  </div>

  <!-- History Modal -->
  <div class="modal-overlay" id="historyModal">
    <div class="modal-content">
      <div class="modal-header">
        <button class="modal-close" onclick="closeHistoryModal()">Ã—</button>
        <div class="modal-title" id="modalTitle">éå»ã®ãƒªã‚¯ãƒ«ãƒ¼ãƒˆå®Ÿç¸¾</div>
        <div class="modal-subtitle" id="modalSubtitle">Past Recruitment Records</div>
      </div>
      <div class="modal-body" id="modalBody">
        <!-- Populated by JavaScript -->
      </div>
    </div>
  </div>

  <script>
    let diseases = [];
    let projectHistory = [];
    let currentHistoryRecords = [];
    let selectedIndex = -1;

    // Severity warnings for specific diseases
    const severityWarnings = {
      'copd': {
        keywords: ['COPD', 'æ…¢æ€§é–‰å¡æ€§è‚ºç–¾æ‚£', 'è‚ºæ°—è…«', 'chronic obstructive pulmonary', 'emphysema', 'æ…¢æ€§æ°—ç®¡æ”¯ç‚'],
        jp: 'âš ï¸ COPDã¯è»½åº¦æ‚£è€…ãŒå¤§å¤šæ•°ã‚’å ã‚ã¾ã™ã€‚ã€Œä¸­ç­‰åº¦ã€ã€Œé‡åº¦ã€ã«é™å®šã™ã‚‹ã¨æ‚£è€…æ•°ãŒæ¿€æ¸›ã—ã€ãƒªã‚¯ãƒ«ãƒ¼ãƒˆãŒéå¸¸ã«å›°é›£ã«ãªã‚Šã¾ã™ã€‚éå»å®Ÿç¸¾ã§ã¯ã€Œé‡ç—‡ã¨è¨ºæ–­ã•ã‚Œã¦ã‚‚ã€æ†æ‚ªï¼å†ç‡ƒãŒãªã—ã€ã¨ã„ã†å¯¾è±¡è€…ã®ã¿å®Ÿç¸¾ãŒã‚ã‚Šã¾ã™ã€‚',
        en: 'âš ï¸ Mild COPD patients are the majority. Restricting to "moderate" or "severe" dramatically reduces the pool. Past success was limited to "severe diagnosis but without exacerbation/relapse" patients only.'
      },
      'asthma': {
        keywords: ['å–˜æ¯', 'asthma', 'ãœã‚“ãã'],
        jp: 'âš ï¸ å–˜æ¯ã‚‚è»½åº¦ãƒ»ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«è‰¯å¥½ãªæ‚£è€…ãŒå¤šã„ã§ã™ã€‚ã€Œé‡ç—‡ã€ã€Œã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ä¸è‰¯ã€ã«é™å®šã™ã‚‹ã¨å¯¾è±¡è€…ãŒå¤§å¹…ã«æ¸›å°‘ã—ã¾ã™ã€‚',
        en: 'âš ï¸ Most asthma patients are mild or well-controlled. Restricting to "severe" or "uncontrolled" significantly reduces the target population.'
      },
      'diabetes': {
        keywords: ['ç³–å°¿ç—…', 'diabetes', 'T2DM', 'T1DM', 'T2D', 'T1D', 'DM'],
        jp: 'âš ï¸ ç³–å°¿ç—…ã¯è»½åº¦ï½ä¸­ç­‰åº¦ã®æ‚£è€…ãŒå¤šæ•°ã§ã™ã€‚HbA1cãŒé«˜ã„ã€åˆä½µç—‡ã‚ã‚Šã€ã‚¤ãƒ³ã‚¹ãƒªãƒ³ä½¿ç”¨è€…ãªã©ã«é™å®šã™ã‚‹ã¨å¯¾è±¡è€…ãŒæ¸›å°‘ã—ã¾ã™ã€‚',
        en: 'âš ï¸ Most diabetes patients are mild to moderate. Restricting to high HbA1c, with complications, or insulin users significantly reduces the pool.'
      },
      'hypertension': {
        keywords: ['é«˜è¡€åœ§', 'hypertension', 'HTN', 'è¡€åœ§'],
        jp: 'âš ï¸ é«˜è¡€åœ§ã¯è»½åº¦ãƒ»ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«è‰¯å¥½ãªæ‚£è€…ãŒå¤§å¤šæ•°ã§ã™ã€‚é‡ç—‡ã‚„æ²»ç™‚æŠµæŠ—æ€§ã«é™å®šã™ã‚‹ã¨å¯¾è±¡è€…ãŒæ¿€æ¸›ã—ã¾ã™ã€‚',
        en: 'âš ï¸ Most hypertension patients are mild or well-controlled. Restricting to severe or treatment-resistant cases dramatically reduces availability.'
      },
      'depression': {
        keywords: ['ã†ã¤ç—…', 'depression', 'depressive', 'å¤§ã†ã¤ç—…', 'MDD'],
        jp: 'âš ï¸ ã†ã¤ç—…ã¯è»½åº¦ï½ä¸­ç­‰åº¦ãŒå¤šãã€ã€Œé‡åº¦ã€ã€Œæ²»ç™‚æŠµæŠ—æ€§ã€ã«é™å®šã™ã‚‹ã¨å¤§å¹…ã«æ¸›å°‘ã—ã¾ã™ã€‚ã¾ãŸç²¾ç¥ç–¾æ‚£ç‰¹æœ‰ã®ç¤¾ä¼šçš„é…æ…®ã‚‚å¿…è¦ã§ã™ã€‚',
        en: 'âš ï¸ Most depression patients are mild to moderate. "Severe" or "treatment-resistant" cases are much fewer. Social sensitivity considerations also apply.'
      },
      'alzheimer': {
        keywords: ['ã‚¢ãƒ«ãƒ„ãƒã‚¤ãƒãƒ¼', 'alzheimer', 'èªçŸ¥ç—‡', 'dementia', 'MCI', 'è»½åº¦èªçŸ¥éšœå®³'],
        jp: 'âš ï¸ èªçŸ¥ç—‡ã¯è»½åº¦ãƒ»MCIæ®µéšã®æ‚£è€…ãŒèª¿æŸ»ã«å‚åŠ ã—ã‚„ã™ã„ã§ã™ã€‚ä¸­ç­‰åº¦ä»¥ä¸Šã«ãªã‚‹ã¨æœ¬äººã®åŒæ„å–å¾—ãŒå›°é›£ã«ãªã‚Šã€ä»‹è­·è€…çµŒç”±ã®ãƒªã‚¯ãƒ«ãƒ¼ãƒˆãŒå¿…è¦ã§ã™ã€‚',
        en: 'âš ï¸ Mild/MCI patients are easier to recruit. Moderate or severe patients require consent through caregivers, adding complexity.'
      },
      'heart_failure': {
        keywords: ['å¿ƒä¸å…¨', 'heart failure', 'CHF', 'HF', 'HFrEF', 'HFpEF'],
        jp: 'âš ï¸ å¿ƒä¸å…¨ã¯NYHAåˆ†é¡I-IIã®è»½åº¦æ‚£è€…ãŒå¤šã„ã§ã™ã€‚NYHA III-IVã®é‡ç—‡æ‚£è€…ã«é™å®šã™ã‚‹ã¨å¯¾è±¡è€…ãŒå¤§å¹…ã«æ¸›å°‘ã—ã¾ã™ã€‚',
        en: 'âš ï¸ Most heart failure patients are NYHA class I-II. Restricting to NYHA III-IV severely limits the available pool.'
      },
      'ckd': {
        keywords: ['æ…¢æ€§è…è‡“ç—…', 'CKD', 'è…ä¸å…¨', 'chronic kidney', 'renal'],
        jp: 'âš ï¸ CKDã¯ã‚¹ãƒ†ãƒ¼ã‚¸1-3ã®è»½åº¦æ‚£è€…ãŒå¤šã„ã§ã™ã€‚ã‚¹ãƒ†ãƒ¼ã‚¸4-5ã‚„é€ææ‚£è€…ã«é™å®šã™ã‚‹ã¨å¯¾è±¡è€…ãŒå¤§å¹…ã«æ¸›å°‘ã—ã¾ã™ã€‚',
        en: 'âš ï¸ Most CKD patients are stage 1-3. Restricting to stage 4-5 or dialysis patients significantly reduces availability.'
      },
      'cancer': {
        keywords: ['ãŒã‚“', 'ç™Œ', 'cancer', 'carcinoma', 'malignant', 'æ‚ªæ€§'],
        jp: 'âš ï¸ ãŒã‚“æ‚£è€…ã¯é€²è¡Œåº¦ï¼ˆã‚¹ãƒ†ãƒ¼ã‚¸ï¼‰ã€æ²»ç™‚ãƒ©ã‚¤ãƒ³ã€ç‰¹å®šã®éºä¼å­å¤‰ç•°ãªã©ã§ç´°åˆ†åŒ–ã•ã‚Œã¾ã™ã€‚æ¡ä»¶ã‚’çµã‚Šã™ãã‚‹ã¨å¯¾è±¡è€…ãŒæ¿€æ¸›ã™ã‚‹ãŸã‚ã€æ¡ä»¶ã®å„ªå…ˆé †ä½ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚',
        en: 'âš ï¸ Cancer patients are segmented by stage, treatment line, and genetic mutations. Over-specifying conditions dramatically reduces the pool. Confirm condition priorities.'
      },
      'ra': {
        keywords: ['é–¢ç¯€ãƒªã‚¦ãƒãƒ', 'rheumatoid arthritis', 'RA'],
        jp: 'âš ï¸ é–¢ç¯€ãƒªã‚¦ãƒãƒã¯ç”Ÿç‰©å­¦çš„è£½å‰¤æœªä½¿ç”¨ã®æ‚£è€…ãŒå¤šã„ã§ã™ã€‚ãƒã‚¤ã‚ªè£½å‰¤ä½¿ç”¨è€…ã€ç‰¹å®šã®è–¬å‰¤çµŒé¨“è€…ã«é™å®šã™ã‚‹ã¨å¯¾è±¡è€…ãŒæ¸›å°‘ã—ã¾ã™ã€‚',
        en: 'âš ï¸ Many RA patients are biologic-naÃ¯ve. Restricting to biologic users or specific drug history significantly reduces availability.'
      }
    };

    // Medical abbreviation dictionary - maps abbreviations to search terms
    const abbreviations = {
      // ===== ONCOLOGY - Solid Tumors =====
      // Lung
      'nsclc': ['non-small cell lung', 'non small cell lung', 'lung cancer', 'bronchus', 'éå°ç´°èƒè‚º', 'è‚ºç™Œ', 'è‚ºãŒã‚“'],
      'sclc': ['small cell lung', 'lung cancer', 'bronchus', 'å°ç´°èƒè‚º', 'è‚ºç™Œ'],
      'lc': ['lung cancer', 'bronchus', 'è‚ºç™Œ', 'è‚ºãŒã‚“'],
      
      // Head & Neck
      'hnscc': ['head and neck', 'pharyn', 'laryn', 'oral cancer', 'tongue', 'oropharyn', 'nasopharyn', 'hypopharyn', 'é ­é ¸éƒ¨', 'å’½é ­', 'å–‰é ­', 'å£è…”', 'èˆŒ'],
      'hnc': ['head and neck', 'pharyn', 'laryn', 'é ­é ¸éƒ¨', 'å’½é ­', 'å–‰é ­'],
      'opc': ['oropharyngeal', 'oropharynx', 'ä¸­å’½é ­'],
      'npc': ['nasopharyngeal', 'nasopharynx', 'é¼»å’½é ­', 'ä¸Šå’½é ­'],
      'hpc': ['hypopharyngeal', 'hypopharynx', 'ä¸‹å’½é ­'],
      'oscc': ['oral squamous cell', 'oral cancer', 'å£è…”ç™Œ', 'å£è…”ãŒã‚“'],
      
      // GI Cancers
      'hcc': ['hepatocellular carcinoma', 'liver cancer', 'hepatic', 'è‚ç´°èƒç™Œ', 'è‚è‡“ç™Œ', 'è‚ãŒã‚“'],
      'crc': ['colorectal cancer', 'colon cancer', 'rectal cancer', 'å¤§è…¸ç™Œ', 'çµè…¸ç™Œ', 'ç›´è…¸ç™Œ'],
      'gc': ['gastric cancer', 'stomach cancer', 'èƒƒç™Œ', 'èƒƒãŒã‚“'],
      'pc': ['pancreatic cancer', 'è†µè‡“ç™Œ', 'è†µç™Œ', 'è†µãŒã‚“'],
      'pdac': ['pancreatic ductal adenocarcinoma', 'pancreatic cancer', 'è†µç®¡è…ºç™Œ', 'è†µè‡“ç™Œ'],
      'ec': ['esophageal cancer', 'é£Ÿé“ç™Œ', 'é£Ÿé“ãŒã‚“'],
      'cca': ['cholangiocarcinoma', 'bile duct cancer', 'èƒ†ç®¡ç™Œ', 'èƒ†é“ç™Œ'],
      'btc': ['biliary tract cancer', 'èƒ†é“ç™Œ'],
      'gist': ['gastrointestinal stromal tumor', 'æ¶ˆåŒ–ç®¡é–“è³ªè…«ç˜'],
      'gej': ['gastroesophageal junction', 'é£Ÿé“èƒƒæ¥åˆéƒ¨'],
      
      // Urological
      'rcc': ['renal cell carcinoma', 'kidney cancer', 'è…ç´°èƒç™Œ', 'è…è‡“ç™Œ', 'è…ãŒã‚“'],
      'uc2': ['urothelial carcinoma', 'bladder cancer', 'å°¿è·¯ä¸Šçš®ç™Œ', 'è†€èƒ±ç™Œ'],
      'bc': ['bladder cancer', 'è†€èƒ±ç™Œ', 'è†€èƒ±ãŒã‚“'],
      'pca': ['prostate cancer', 'å‰ç«‹è…ºç™Œ', 'å‰ç«‹è…ºãŒã‚“'],
      'mcrpc': ['metastatic castration-resistant prostate', 'è»¢ç§»æ€§å»å‹¢æŠµæŠ—æ€§å‰ç«‹è…º'],
      'mhspc': ['metastatic hormone-sensitive prostate', 'è»¢ç§»æ€§ãƒ›ãƒ«ãƒ¢ãƒ³æ„Ÿå—æ€§å‰ç«‹è…º'],
      
      // Gynecological
      'oc': ['ovarian cancer', 'åµå·£ç™Œ', 'åµå·£ãŒã‚“'],
      'eoc': ['epithelial ovarian cancer', 'ä¸Šçš®æ€§åµå·£ç™Œ'],
      'cc': ['cervical cancer', 'å­å®®é ¸ç™Œ', 'å­å®®é ¸ãŒã‚“'],
      'endc': ['endometrial cancer', 'å­å®®ä½“ç™Œ', 'å­å®®å†…è†œç™Œ'],
      
      // Breast
      'bc2': ['breast cancer', 'ä¹³ç™Œ', 'ä¹³ãŒã‚“'],
      'tnbc': ['triple negative breast cancer', 'breast cancer', 'ãƒˆãƒªãƒ—ãƒ«ãƒã‚¬ãƒ†ã‚£ãƒ–ä¹³ç™Œ'],
      'her2': ['her2 positive', 'breast cancer', 'HER2é™½æ€§'],
      'hr': ['hormone receptor', 'ãƒ›ãƒ«ãƒ¢ãƒ³å—å®¹ä½“'],
      'mbc': ['metastatic breast cancer', 'è»¢ç§»æ€§ä¹³ç™Œ'],
      
      // Skin
      'mel': ['melanoma', 'ãƒ¡ãƒ©ãƒãƒ¼ãƒ', 'æ‚ªæ€§é»’è‰²è…«'],
      'bcc': ['basal cell carcinoma', 'åŸºåº•ç´°èƒç™Œ'],
      'cscc': ['cutaneous squamous cell carcinoma', 'çš®è†šæ‰å¹³ä¸Šçš®ç™Œ'],
      'mcc': ['merkel cell carcinoma', 'ãƒ¡ãƒ«ã‚±ãƒ«ç´°èƒç™Œ'],
      
      // Brain
      'gbm': ['glioblastoma', 'glioblastoma multiforme', 'è† èŠ½è…«', 'ã‚°ãƒªã‚ªãƒ–ãƒ©ã‚¹ãƒˆãƒ¼ãƒ'],
      'lgg': ['low grade glioma', 'ä½æ‚ªæ€§åº¦ç¥çµŒè† è…«'],
      'hgg': ['high grade glioma', 'é«˜æ‚ªæ€§åº¦ç¥çµŒè† è…«'],
      
      // Sarcoma
      'sts': ['soft tissue sarcoma', 'è»Ÿéƒ¨è‚‰è…«'],
      'os': ['osteosarcoma', 'éª¨è‚‰è…«'],
      'es': ['ewing sarcoma', 'ãƒ¦ãƒ¼ã‚¤ãƒ³ã‚°è‚‰è…«'],
      'rms': ['rhabdomyosarcoma', 'æ¨ªç´‹ç­‹è‚‰è…«'],
      
      // Thyroid
      'dtc': ['differentiated thyroid cancer', 'åˆ†åŒ–å‹ç”²çŠ¶è…ºç™Œ'],
      'ptc': ['papillary thyroid cancer', 'ä¹³é ­çŠ¶ç”²çŠ¶è…ºç™Œ'],
      'ftc': ['follicular thyroid cancer', 'æ¿¾èƒæ€§ç”²çŠ¶è…ºç™Œ'],
      'mtc': ['medullary thyroid cancer', 'ç”²çŠ¶è…ºé«„æ§˜ç™Œ'],
      'atc': ['anaplastic thyroid cancer', 'æœªåˆ†åŒ–ç”²çŠ¶è…ºç™Œ'],
      
      // ===== ONCOLOGY - Hematological =====
      'aml': ['acute myeloid leukemia', 'acute myelogenous', 'æ€¥æ€§éª¨é«„æ€§ç™½è¡€ç—…'],
      'cml': ['chronic myeloid leukemia', 'chronic myelogenous', 'æ…¢æ€§éª¨é«„æ€§ç™½è¡€ç—…'],
      'all': ['acute lymphoblastic leukemia', 'acute lymphocytic', 'æ€¥æ€§ãƒªãƒ³ãƒ‘æ€§ç™½è¡€ç—…'],
      'cll': ['chronic lymphocytic leukemia', 'æ…¢æ€§ãƒªãƒ³ãƒ‘æ€§ç™½è¡€ç—…'],
      'dlbcl': ['diffuse large b-cell lymphoma', 'ã³ã¾ã‚“æ€§å¤§ç´°èƒå‹Bç´°èƒãƒªãƒ³ãƒ‘è…«'],
      'fl': ['follicular lymphoma', 'æ¿¾èƒæ€§ãƒªãƒ³ãƒ‘è…«'],
      'mcl': ['mantle cell lymphoma', 'ãƒãƒ³ãƒˆãƒ«ç´°èƒãƒªãƒ³ãƒ‘è…«'],
      'mzl': ['marginal zone lymphoma', 'è¾ºç¸å¸¯ãƒªãƒ³ãƒ‘è…«'],
      'nhl': ['non-hodgkin lymphoma', 'éãƒ›ã‚¸ã‚­ãƒ³ãƒªãƒ³ãƒ‘è…«'],
      'hl': ['hodgkin lymphoma', 'hodgkin disease', 'ãƒ›ã‚¸ã‚­ãƒ³ãƒªãƒ³ãƒ‘è…«'],
      'mm': ['multiple myeloma', 'å¤šç™ºæ€§éª¨é«„è…«'],
      'wm': ['waldenstrom macroglobulinemia', 'ãƒ¯ãƒ«ãƒ‡ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ãƒ ãƒã‚¯ãƒ­ã‚°ãƒ­ãƒ–ãƒªãƒ³è¡€ç—‡'],
      'mds': ['myelodysplastic syndrome', 'éª¨é«„ç•°å½¢æˆç—‡å€™ç¾¤'],
      'mpn': ['myeloproliferative neoplasm', 'éª¨é«„å¢—æ®–æ€§è…«ç˜'],
      'et': ['essential thrombocythemia', 'æœ¬æ…‹æ€§è¡€å°æ¿è¡€ç—‡'],
      'pv': ['polycythemia vera', 'çœŸæ€§å¤šè¡€ç—‡'],
      'mf': ['myelofibrosis', 'éª¨é«„ç·šç¶­ç—‡'],
      'cmml': ['chronic myelomonocytic leukemia', 'æ…¢æ€§éª¨é«„å˜çƒæ€§ç™½è¡€ç—…'],
      
      // Biomarkers/Mutations
      'egfr': ['egfr mutation', 'EGFRå¤‰ç•°', 'è‚ºç™Œ'],
      'alk': ['alk positive', 'alk fusion', 'ALKé™½æ€§', 'ALKèåˆ'],
      'ros1': ['ros1 positive', 'ros1 fusion', 'ROS1é™½æ€§'],
      'braf': ['braf mutation', 'BRAFå¤‰ç•°'],
      'kras': ['kras mutation', 'KRASå¤‰ç•°'],
      'ntrk': ['ntrk fusion', 'NTRKèåˆ'],
      'ret': ['ret fusion', 'RETèåˆ'],
      'met': ['met exon 14', 'METã‚¨ã‚¯ã‚½ãƒ³14'],
      'brca': ['brca mutation', 'BRCAå¤‰ç•°', 'breast cancer', 'ovarian cancer'],
      'msi': ['microsatellite instability', 'ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ†ãƒ©ã‚¤ãƒˆä¸å®‰å®šæ€§'],
      'msih': ['msi high', 'MSI-H'],
      'tmb': ['tumor mutational burden', 'è…«ç˜éºä¼å­å¤‰ç•°é‡'],
      'pdl1': ['pd-l1', 'PD-L1'],
      
      // ===== NEUROLOGY =====
      // Demyelinating
      'cidp': ['chronic inflammatory demyelinating', 'inflammatory polyneuropathy', 'polyradiculoneuropathy', 'æ…¢æ€§ç‚ç—‡æ€§è„±é«„', 'å¤šç™ºç¥çµŒç‚', 'å¤šç™ºæ ¹ç¥çµŒç‚', 'ç‚ç—‡æ€§å¤šç™º', 'ãƒ‹ãƒ¥ãƒ¼ãƒ­ãƒ‘ãƒãƒ¼', 'ãƒ‹ãƒ¥ãƒ¼ãƒ­ãƒ‘ãƒ'],
      'gbs': ['guillain-barre', 'guillain', 'ã‚®ãƒ©ãƒ³ãƒãƒ¬ãƒ¼', 'ã‚®ãƒ©ãƒ³ãƒ»ãƒãƒ¬ãƒ¼', 'æ€¥æ€§ç‚ç—‡æ€§è„±é«„æ€§å¤šç™ºç¥çµŒç‚'],
      'ms': ['multiple sclerosis', 'å¤šç™ºæ€§ç¡¬åŒ–ç—‡'],
      'nmo': ['neuromyelitis optica', 'è¦–ç¥çµŒè„Šé«„ç‚'],
      'nmosd': ['neuromyelitis optica spectrum disorder', 'è¦–ç¥çµŒè„Šé«„ç‚ã‚¹ãƒšã‚¯ãƒˆãƒ©ãƒ éšœå®³'],
      'adem': ['acute disseminated encephalomyelitis', 'æ€¥æ€§æ•£åœ¨æ€§è„³è„Šé«„ç‚'],
      
      // Neurodegenerative
      'ad': ['alzheimer disease', 'alzheimer\'s', 'ã‚¢ãƒ«ãƒ„ãƒã‚¤ãƒãƒ¼', 'èªçŸ¥ç—‡'],
      'pd': ['parkinson disease', 'parkinson\'s', 'ãƒ‘ãƒ¼ã‚­ãƒ³ã‚½ãƒ³'],
      'als': ['amyotrophic lateral sclerosis', 'ç­‹èç¸®æ€§å´ç´¢ç¡¬åŒ–ç—‡', 'ALS'],
      'mnd': ['motor neuron disease', 'é‹å‹•ãƒ‹ãƒ¥ãƒ¼ãƒ­ãƒ³ç–¾æ‚£'],
      'hd': ['huntington disease', 'huntington\'s', 'ãƒãƒ³ãƒãƒ³ãƒˆãƒ³'],
      'psp': ['progressive supranuclear palsy', 'é€²è¡Œæ€§æ ¸ä¸Šæ€§éº»ç—º'],
      'msa': ['multiple system atrophy', 'å¤šç³»çµ±èç¸®ç—‡'],
      'cbd': ['corticobasal degeneration', 'å¤§è„³çš®è³ªåŸºåº•æ ¸å¤‰æ€§ç—‡'],
      'dlb': ['dementia with lewy bodies', 'ãƒ¬ãƒ“ãƒ¼å°ä½“å‹èªçŸ¥ç—‡'],
      'ftd': ['frontotemporal dementia', 'å‰é ­å´é ­å‹èªçŸ¥ç—‡'],
      'mci': ['mild cognitive impairment', 'è»½åº¦èªçŸ¥éšœå®³'],
      
      // Neuromuscular
      'mg': ['myasthenia gravis', 'é‡ç—‡ç­‹ç„¡åŠ›ç—‡'],
      'gmg': ['generalized myasthenia gravis', 'å…¨èº«å‹é‡ç—‡ç­‹ç„¡åŠ›ç—‡'],
      'sma': ['spinal muscular atrophy', 'è„Šé«„æ€§ç­‹èç¸®ç—‡'],
      'dmd': ['duchenne muscular dystrophy', 'ãƒ‡ãƒ¥ã‚·ã‚§ãƒ³ãƒŒå‹ç­‹ã‚¸ã‚¹ãƒˆãƒ­ãƒ•ã‚£ãƒ¼'],
      'bmd': ['becker muscular dystrophy', 'ãƒ™ãƒƒã‚«ãƒ¼å‹ç­‹ã‚¸ã‚¹ãƒˆãƒ­ãƒ•ã‚£ãƒ¼'],
      'fshd': ['facioscapulohumeral muscular dystrophy', 'é¡”é¢è‚©ç”²ä¸Šè…•å‹ç­‹ã‚¸ã‚¹ãƒˆãƒ­ãƒ•ã‚£ãƒ¼'],
      'lgmd': ['limb-girdle muscular dystrophy', 'è‚¢å¸¯å‹ç­‹ã‚¸ã‚¹ãƒˆãƒ­ãƒ•ã‚£ãƒ¼'],
      'dm3': ['myotonic dystrophy', 'ç­‹å¼·ç›´æ€§ã‚¸ã‚¹ãƒˆãƒ­ãƒ•ã‚£ãƒ¼'],
      'cmt': ['charcot-marie-tooth', 'ã‚·ãƒ£ãƒ«ã‚³ãƒ¼ãƒ»ãƒãƒªãƒ¼ãƒ»ãƒˆã‚¥ãƒ¼ã‚¹'],
      
      // Epilepsy & Seizures
      'epi': ['epilepsy', 'ã¦ã‚“ã‹ã‚“'],
      'dre': ['drug resistant epilepsy', 'é›£æ²»æ€§ã¦ã‚“ã‹ã‚“'],
      'lgs': ['lennox-gastaut syndrome', 'ãƒ¬ãƒãƒƒã‚¯ã‚¹ãƒ»ã‚¬ã‚¹ãƒˆãƒ¼ç—‡å€™ç¾¤'],
      'ds': ['dravet syndrome', 'ãƒ‰ãƒ©ãƒ™ç—‡å€™ç¾¤'],
      
      // Headache
      'mig': ['migraine', 'ç‰‡é ­ç—›'],
      'cm': ['chronic migraine', 'æ…¢æ€§ç‰‡é ­ç—›'],
      'em': ['episodic migraine', 'åå¾©æ€§ç‰‡é ­ç—›'],
      'ch': ['cluster headache', 'ç¾¤ç™ºé ­ç—›'],
      
      // Other Neuro
      'tbi': ['traumatic brain injury', 'å¤–å‚·æ€§è„³æå‚·'],
      'sci': ['spinal cord injury', 'è„Šé«„æå‚·'],
      'np': ['neuropathic pain', 'ç¥çµŒéšœå®³æ€§ç–¼ç—›'],
      'pn': ['peripheral neuropathy', 'æœ«æ¢¢ç¥çµŒéšœå®³', 'ãƒ‹ãƒ¥ãƒ¼ãƒ­ãƒ‘ãƒãƒ¼'],
      'dpn': ['diabetic peripheral neuropathy', 'ç³–å°¿ç—…æ€§æœ«æ¢¢ç¥çµŒéšœå®³'],
      
      // ===== IMMUNOLOGY & RHEUMATOLOGY =====
      'ra': ['rheumatoid arthritis', 'é–¢ç¯€ãƒªã‚¦ãƒãƒ'],
      'sle': ['systemic lupus erythematosus', 'lupus', 'ãƒ«ãƒ¼ãƒ—ã‚¹', 'å…¨èº«æ€§ã‚¨ãƒªãƒ†ãƒãƒˆãƒ¼ãƒ‡ã‚¹'],
      'as': ['ankylosing spondylitis', 'å¼·ç›´æ€§è„Šæ¤ç‚'],
      'psa': ['psoriatic arthritis', 'ä¹¾ç™¬æ€§é–¢ç¯€ç‚'],
      'axspa': ['axial spondyloarthritis', 'ä½“è»¸æ€§è„Šæ¤é–¢ç¯€ç‚'],
      'nraxspa': ['non-radiographic axial spondyloarthritis', 'éXç·šä½“è»¸æ€§è„Šæ¤é–¢ç¯€ç‚'],
      'jia': ['juvenile idiopathic arthritis', 'è‹¥å¹´æ€§ç‰¹ç™ºæ€§é–¢ç¯€ç‚'],
      'sjia': ['systemic juvenile idiopathic arthritis', 'å…¨èº«å‹è‹¥å¹´æ€§ç‰¹ç™ºæ€§é–¢ç¯€ç‚'],
      'ss': ['sjogren syndrome', 'ã‚·ã‚§ãƒ¼ã‚°ãƒ¬ãƒ³ç—‡å€™ç¾¤'],
      'ssc': ['systemic sclerosis', 'scleroderma', 'å¼·çš®ç—‡', 'å…¨èº«æ€§å¼·çš®ç—‡'],
      'pm': ['polymyositis', 'å¤šç™ºæ€§ç­‹ç‚'],
      'dm4': ['dermatomyositis', 'çš®è†šç­‹ç‚'],
      'iim': ['idiopathic inflammatory myopathy', 'ç‰¹ç™ºæ€§ç‚ç—‡æ€§ç­‹ç–¾æ‚£'],
      'gpa': ['granulomatosis with polyangiitis', 'wegener', 'å¤šç™ºè¡€ç®¡ç‚æ€§è‚‰èŠ½è…«ç—‡'],
      'egpa': ['eosinophilic granulomatosis with polyangiitis', 'å¥½é…¸çƒæ€§å¤šç™ºè¡€ç®¡ç‚æ€§è‚‰èŠ½è…«ç—‡'],
      'mpa': ['microscopic polyangiitis', 'é¡•å¾®é¡çš„å¤šç™ºè¡€ç®¡ç‚'],
      'anca': ['anca vasculitis', 'anca associated', 'ANCAé–¢é€£è¡€ç®¡ç‚'],
      'tak': ['takayasu arteritis', 'é«˜å®‰å‹•è„ˆç‚'],
      'gca': ['giant cell arteritis', 'å·¨ç´°èƒæ€§å‹•è„ˆç‚'],
      'pĞ°Ğ½': ['polyarteritis nodosa', 'çµç¯€æ€§å¤šç™ºå‹•è„ˆç‚'],
      'behcet': ['behcet disease', 'ãƒ™ãƒ¼ãƒã‚§ãƒƒãƒˆç—…'],
      'fmf': ['familial mediterranean fever', 'å®¶æ—æ€§åœ°ä¸­æµ·ç†±'],
      'still': ['adult onset still disease', 'æˆäººç™ºç—‡ã‚¹ãƒãƒ«ç—…', 'ã‚¹ãƒ†ã‚£ãƒ«ç—…'],
      'aosd': ['adult onset still disease', 'æˆäººã‚¹ãƒãƒ«ç—…'],
      'caps': ['cryopyrin associated periodic syndrome', 'ã‚¯ãƒªã‚ªãƒ”ãƒªãƒ³é–¢é€£å‘¨æœŸæ€§ç—‡å€™ç¾¤'],
      
      // ===== GASTROENTEROLOGY =====
      'ibd': ['inflammatory bowel disease', 'ç‚ç—‡æ€§è…¸ç–¾æ‚£'],
      'uc': ['ulcerative colitis', 'æ½°ç˜æ€§å¤§è…¸ç‚'],
      'cd': ['crohn disease', 'crohn\'s disease', 'ã‚¯ãƒ­ãƒ¼ãƒ³ç—…'],
      'gerd': ['gastroesophageal reflux', 'èƒƒé£Ÿé“é€†æµç—‡'],
      'ibs': ['irritable bowel syndrome', 'éæ•æ€§è…¸ç—‡å€™ç¾¤'],
      'ibsd': ['ibs with diarrhea', 'ä¸‹ç—¢å‹IBS'],
      'ibsc': ['ibs with constipation', 'ä¾¿ç§˜å‹IBS'],
      'sibo': ['small intestinal bacterial overgrowth', 'å°è…¸å†…ç´°èŒç•°å¸¸å¢—æ®–'],
      'eoe': ['eosinophilic esophagitis', 'å¥½é…¸çƒæ€§é£Ÿé“ç‚'],
      'pud': ['peptic ulcer disease', 'æ¶ˆåŒ–æ€§æ½°ç˜'],
      'celiac': ['celiac disease', 'ã‚»ãƒªã‚¢ãƒƒã‚¯ç—…'],
      'pss': ['short bowel syndrome', 'çŸ­è…¸ç—‡å€™ç¾¤'],
      
      // ===== HEPATOLOGY =====
      'hbv': ['hepatitis b', 'Bå‹è‚ç‚'],
      'hcv': ['hepatitis c', 'Cå‹è‚ç‚'],
      'hav': ['hepatitis a', 'Aå‹è‚ç‚'],
      'hev': ['hepatitis e', 'Eå‹è‚ç‚'],
      'aih': ['autoimmune hepatitis', 'è‡ªå·±å…ç–«æ€§è‚ç‚'],
      'pbc': ['primary biliary cholangitis', 'åŸç™ºæ€§èƒ†æ±æ€§èƒ†ç®¡ç‚'],
      'psc': ['primary sclerosing cholangitis', 'åŸç™ºæ€§ç¡¬åŒ–æ€§èƒ†ç®¡ç‚'],
      'nafld': ['non-alcoholic fatty liver', 'éã‚¢ãƒ«ã‚³ãƒ¼ãƒ«æ€§è„‚è‚ªæ€§è‚ç–¾æ‚£'],
      'nash': ['non-alcoholic steatohepatitis', 'éã‚¢ãƒ«ã‚³ãƒ¼ãƒ«æ€§è„‚è‚ªè‚ç‚'],
      'masld': ['metabolic dysfunction-associated steatotic liver disease', 'ä»£è¬æ©Ÿèƒ½éšœå®³é–¢é€£è„‚è‚ªæ€§è‚ç–¾æ‚£'],
      'mash': ['metabolic dysfunction-associated steatohepatitis', 'ä»£è¬æ©Ÿèƒ½éšœå®³é–¢é€£è„‚è‚ªè‚ç‚'],
      'ald': ['alcoholic liver disease', 'ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«æ€§è‚ç–¾æ‚£'],
      'hwe': ['hepatic encephalopathy', 'è‚æ€§è„³ç—‡'],
      
      // ===== RESPIRATORY =====
      'copd': ['chronic obstructive pulmonary disease', 'æ…¢æ€§é–‰å¡æ€§è‚ºç–¾æ‚£', 'è‚ºæ°—è…«', 'æ…¢æ€§æ°—ç®¡æ”¯ç‚'],
      'ild': ['interstitial lung disease', 'é–“è³ªæ€§è‚ºç–¾æ‚£'],
      'ipf': ['idiopathic pulmonary fibrosis', 'ç‰¹ç™ºæ€§è‚ºç·šç¶­ç—‡'],
      'ppf': ['progressive pulmonary fibrosis', 'é€²è¡Œæ€§è‚ºç·šç¶­ç—‡'],
      'hp': ['hypersensitivity pneumonitis', 'éæ•æ€§è‚ºç‚'],
      'nsip': ['nonspecific interstitial pneumonia', 'éç‰¹ç•°æ€§é–“è³ªæ€§è‚ºç‚'],
      'ards': ['acute respiratory distress syndrome', 'æ€¥æ€§å‘¼å¸çª®è¿«ç—‡å€™ç¾¤'],
      'osa': ['obstructive sleep apnea', 'é–‰å¡æ€§ç¡çœ æ™‚ç„¡å‘¼å¸'],
      'csa': ['central sleep apnea', 'ä¸­æ¢æ€§ç¡çœ æ™‚ç„¡å‘¼å¸'],
      'cf': ['cystic fibrosis', 'åš¢èƒæ€§ç·šç¶­ç—‡'],
      'nbe': ['non-cf bronchiectasis', 'éCFæ°—ç®¡æ”¯æ‹¡å¼µç—‡'],
      'be': ['bronchiectasis', 'æ°—ç®¡æ”¯æ‹¡å¼µç—‡'],
      'abpa': ['allergic bronchopulmonary aspergillosis', 'ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æ€§æ°—ç®¡æ”¯è‚ºã‚¢ã‚¹ãƒšãƒ«ã‚®ãƒ«ã‚¹ç—‡'],
      'sarcoid': ['sarcoidosis', 'ã‚µãƒ«ã‚³ã‚¤ãƒ‰ãƒ¼ã‚·ã‚¹'],
      'pah': ['pulmonary arterial hypertension', 'è‚ºå‹•è„ˆæ€§è‚ºé«˜è¡€åœ§ç—‡'],
      'ph': ['pulmonary hypertension', 'è‚ºé«˜è¡€åœ§ç—‡'],
      'cteph': ['chronic thromboembolic pulmonary hypertension', 'æ…¢æ€§è¡€æ “å¡æ “æ€§è‚ºé«˜è¡€åœ§ç—‡'],
      
      // Asthma
      'asthma': ['asthma', 'å–˜æ¯', 'ãœã‚“ãã'],
      'sa': ['severe asthma', 'é‡ç—‡å–˜æ¯'],
      'sea': ['severe eosinophilic asthma', 'é‡ç—‡å¥½é…¸çƒæ€§å–˜æ¯'],
      'aa': ['allergic asthma', 'ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æ€§å–˜æ¯'],
      
      // ===== CARDIOLOGY =====
      'chf': ['congestive heart failure', 'heart failure', 'ã†ã£è¡€æ€§å¿ƒä¸å…¨'],
      'hf': ['heart failure', 'å¿ƒä¸å…¨'],
      'hfref': ['heart failure reduced ejection fraction', 'é§†å‡ºç‡ä½ä¸‹å‹å¿ƒä¸å…¨'],
      'hfpef': ['heart failure preserved ejection fraction', 'é§†å‡ºç‡ç¶­æŒå‹å¿ƒä¸å…¨'],
      'hfmref': ['heart failure mildly reduced ejection fraction', 'é§†å‡ºç‡è»½åº¦ä½ä¸‹å‹å¿ƒä¸å…¨'],
      'af': ['atrial fibrillation', 'å¿ƒæˆ¿ç´°å‹•'],
      'afib': ['atrial fibrillation', 'å¿ƒæˆ¿ç´°å‹•'],
      'afl': ['atrial flutter', 'å¿ƒæˆ¿ç²—å‹•'],
      'vt': ['ventricular tachycardia', 'å¿ƒå®¤é »æ‹'],
      'vf': ['ventricular fibrillation', 'å¿ƒå®¤ç´°å‹•'],
      'mi': ['myocardial infarction', 'å¿ƒç­‹æ¢—å¡'],
      'ami': ['acute myocardial infarction', 'æ€¥æ€§å¿ƒç­‹æ¢—å¡'],
      'acs': ['acute coronary syndrome', 'æ€¥æ€§å† ç—‡å€™ç¾¤'],
      'nstemi': ['non-st elevation myocardial infarction', 'éSTä¸Šæ˜‡å‹å¿ƒç­‹æ¢—å¡'],
      'stemi': ['st elevation myocardial infarction', 'STä¸Šæ˜‡å‹å¿ƒç­‹æ¢—å¡'],
      'cad': ['coronary artery disease', 'å† å‹•è„ˆç–¾æ‚£'],
      'chd': ['coronary heart disease', 'å† çŠ¶å‹•è„ˆæ€§å¿ƒç–¾æ‚£'],
      'ihd': ['ischemic heart disease', 'è™šè¡€æ€§å¿ƒç–¾æ‚£'],
      'pad': ['peripheral artery disease', 'æœ«æ¢¢å‹•è„ˆç–¾æ‚£'],
      'cli': ['critical limb ischemia', 'é‡ç—‡ä¸‹è‚¢è™šè¡€'],
      'clti': ['chronic limb-threatening ischemia', 'æ…¢æ€§ä¸‹è‚¢è™šè¡€'],
      'aaa': ['abdominal aortic aneurysm', 'è…¹éƒ¨å¤§å‹•è„ˆç˜¤'],
      'dvt': ['deep vein thrombosis', 'æ·±éƒ¨é™è„ˆè¡€æ “ç—‡'],
      'pe': ['pulmonary embolism', 'è‚ºå¡æ “ç—‡'],
      'vte': ['venous thromboembolism', 'é™è„ˆè¡€æ “å¡æ “ç—‡'],
      'htn': ['hypertension', 'é«˜è¡€åœ§'],
      'hcm': ['hypertrophic cardiomyopathy', 'è‚¥å¤§å‹å¿ƒç­‹ç—‡'],
      'dcm': ['dilated cardiomyopathy', 'æ‹¡å¼µå‹å¿ƒç­‹ç—‡'],
      'arvc': ['arrhythmogenic right ventricular cardiomyopathy', 'ä¸æ•´è„ˆåŸæ€§å³å®¤å¿ƒç­‹ç—‡'],
      'attr': ['transthyretin amyloidosis', 'ãƒˆãƒ©ãƒ³ã‚¹ã‚µã‚¤ãƒ¬ãƒãƒ³ã‚¢ãƒŸãƒ­ã‚¤ãƒ‰ãƒ¼ã‚·ã‚¹'],
      'attrwt': ['wild-type transthyretin amyloidosis', 'é‡ç”Ÿå‹TTRã‚¢ãƒŸãƒ­ã‚¤ãƒ‰ãƒ¼ã‚·ã‚¹'],
      'attrv': ['hereditary transthyretin amyloidosis', 'éºä¼æ€§TTRã‚¢ãƒŸãƒ­ã‚¤ãƒ‰ãƒ¼ã‚·ã‚¹'],
      'al': ['al amyloidosis', 'ALã‚¢ãƒŸãƒ­ã‚¤ãƒ‰ãƒ¼ã‚·ã‚¹'],
      
      // ===== NEPHROLOGY =====
      'ckd': ['chronic kidney disease', 'æ…¢æ€§è…è‡“ç—…', 'æ…¢æ€§è…ä¸å…¨'],
      'aki': ['acute kidney injury', 'æ€¥æ€§è…éšœå®³'],
      'esrd': ['end stage renal disease', 'æœ«æœŸè…ä¸å…¨'],
      'eskd': ['end stage kidney disease', 'æœ«æœŸè…è‡“ç—…'],
      'igan': ['iga nephropathy', 'IgAè…ç—‡'],
      'fsgs': ['focal segmental glomerulosclerosis', 'å·£çŠ¶åˆ†ç¯€æ€§ç³¸çƒä½“ç¡¬åŒ–ç—‡'],
      'mgn': ['membranous nephropathy', 'è†œæ€§è…ç—‡'],
      'mpgn': ['membranoproliferative glomerulonephritis', 'è†œæ€§å¢—æ®–æ€§ç³¸çƒä½“è…ç‚'],
      'atin': ['acute tubulointerstitial nephritis', 'æ€¥æ€§å°¿ç´°ç®¡é–“è³ªæ€§è…ç‚'],
      'rpgn': ['rapidly progressive glomerulonephritis', 'æ€¥é€Ÿé€²è¡Œæ€§ç³¸çƒä½“è…ç‚'],
      'pckd': ['polycystic kidney disease', 'å¤šç™ºæ€§åš¢èƒè…'],
      'adpkd': ['autosomal dominant polycystic kidney disease', 'å¸¸æŸ“è‰²ä½“å„ªæ€§å¤šç™ºæ€§åš¢èƒè…'],
      'arpkd': ['autosomal recessive polycystic kidney disease', 'å¸¸æŸ“è‰²ä½“åŠ£æ€§å¤šç™ºæ€§åš¢èƒè…'],
      'dn': ['diabetic nephropathy', 'ç³–å°¿ç—…æ€§è…ç—‡'],
      'dkd': ['diabetic kidney disease', 'ç³–å°¿ç—…æ€§è…è‡“ç—…'],
      'htn2': ['hypertensive nephrosclerosis', 'é«˜è¡€åœ§æ€§è…ç¡¬åŒ–ç—‡'],
      'ln': ['lupus nephritis', 'ãƒ«ãƒ¼ãƒ—ã‚¹è…ç‚'],
      'ahus': ['atypical hemolytic uremic', 'hemolytic uremic syndrome', 'hemolytic-uremic', 'éå…¸å‹æº¶è¡€æ€§å°¿æ¯’ç—‡', 'æº¶è¡€æ€§å°¿æ¯’ç—‡ç—‡å€™ç¾¤', 'æº¶è¡€æ€§å°¿æ¯’ç—‡'],
      'hus2': ['hemolytic uremic syndrome', 'hemolytic-uremic', 'æº¶è¡€æ€§å°¿æ¯’ç—‡ç—‡å€™ç¾¤', 'æº¶è¡€æ€§å°¿æ¯’ç—‡'],
      
      // ===== DIABETES & METABOLIC =====
      't1dm': ['type 1 diabetes', 'insulin dependent', '1å‹ç³–å°¿ç—…', 'IDDM'],
      't2dm': ['type 2 diabetes', 'non-insulin dependent', '2å‹ç³–å°¿ç—…', 'NIDDM'],
      't1d': ['type 1 diabetes', '1å‹ç³–å°¿ç—…'],
      't2d': ['type 2 diabetes', '2å‹ç³–å°¿ç—…'],
      'dm': ['diabetes mellitus', 'ç³–å°¿ç—…'],
      'gdm': ['gestational diabetes', 'å¦Šå¨ ç³–å°¿ç—…'],
      'lada': ['latent autoimmune diabetes', 'ç·©å¾é€²è¡Œ1å‹ç³–å°¿ç—…'],
      'mody': ['maturity onset diabetes of the young', 'è‹¥å¹´ç™ºç—‡æˆäººå‹ç³–å°¿ç—…'],
      'pcos': ['polycystic ovary syndrome', 'å¤šåš¢èƒæ€§åµå·£ç—‡å€™ç¾¤'],
      'obesity': ['obesity', 'è‚¥æº€ç—‡', 'è‚¥æº€'],
      'gout': ['gout', 'ç—›é¢¨'],
      'fh': ['familial hypercholesterolemia', 'å®¶æ—æ€§é«˜ã‚³ãƒ¬ã‚¹ãƒ†ãƒ­ãƒ¼ãƒ«è¡€ç—‡'],
      'hefe': ['heterozygous familial hypercholesterolemia', 'ãƒ˜ãƒ†ãƒ­æ¥åˆä½“å®¶æ—æ€§é«˜ã‚³ãƒ¬ã‚¹ãƒ†ãƒ­ãƒ¼ãƒ«è¡€ç—‡'],
      'hofe': ['homozygous familial hypercholesterolemia', 'ãƒ›ãƒ¢æ¥åˆä½“å®¶æ—æ€§é«˜ã‚³ãƒ¬ã‚¹ãƒ†ãƒ­ãƒ¼ãƒ«è¡€ç—‡'],
      'lp': ['lipoprotein(a)', 'ãƒªãƒãƒ—ãƒ­ãƒ†ã‚¤ãƒ³'],
      'hypertrig': ['hypertriglyceridemia', 'é«˜ãƒˆãƒªã‚°ãƒªã‚»ãƒªãƒ‰è¡€ç—‡'],
      'hypothyroid': ['hypothyroidism', 'ç”²çŠ¶è…ºæ©Ÿèƒ½ä½ä¸‹ç—‡'],
      'hyperthyroid': ['hyperthyroidism', 'ç”²çŠ¶è…ºæ©Ÿèƒ½äº¢é€²ç—‡'],
      'graves': ['graves disease', 'ãƒã‚»ãƒ‰ã‚¦ç—…'],
      'hashimoto': ['hashimoto thyroiditis', 'æ©‹æœ¬ç—…'],
      'acromegaly': ['acromegaly', 'å…ˆç«¯å·¨å¤§ç—‡'],
      'cushing': ['cushing syndrome', 'ã‚¯ãƒƒã‚·ãƒ³ã‚°ç—‡å€™ç¾¤'],
      'addison': ['addison disease', 'ã‚¢ã‚¸ã‚½ãƒ³ç—…'],
      'pheo': ['pheochromocytoma', 'è¤è‰²ç´°èƒè…«'],
      'hyperparathyroid': ['hyperparathyroidism', 'å‰¯ç”²çŠ¶è…ºæ©Ÿèƒ½äº¢é€²ç—‡'],
      
      // ===== DERMATOLOGY =====
      'ad3': ['atopic dermatitis', 'ã‚¢ãƒˆãƒ”ãƒ¼æ€§çš®è†šç‚'],
      'pso': ['psoriasis', 'ä¹¾ç™¬'],
      'pso2': ['plaque psoriasis', 'å°‹å¸¸æ€§ä¹¾ç™¬'],
      'csu': ['chronic spontaneous urticaria', 'æ…¢æ€§ç‰¹ç™ºæ€§è•éº»ç–¹'],
      'ciu': ['chronic idiopathic urticaria', 'æ…¢æ€§ç‰¹ç™ºæ€§è•éº»ç–¹'],
      'hs': ['hidradenitis suppurativa', 'åŒ–è†¿æ€§æ±—è…ºç‚'],
      'aa2': ['alopecia areata', 'å††å½¢è„±æ¯›ç—‡'],
      'aga': ['androgenetic alopecia', 'ç”·æ€§å‹è„±æ¯›ç—‡'],
      'vit': ['vitiligo', 'ç™½æ–‘', 'å°‹å¸¸æ€§ç™½æ–‘'],
      'bp': ['bullous pemphigoid', 'æ°´ç–±æ€§é¡å¤©ç–±ç˜¡'],
      'pv2': ['pemphigus vulgaris', 'å°‹å¸¸æ€§å¤©ç–±ç˜¡'],
      'sjs': ['stevens-johnson syndrome', 'ã‚¹ãƒ†ã‚£ãƒ¼ãƒ–ãƒ³ã‚¹ãƒ»ã‚¸ãƒ§ãƒ³ã‚½ãƒ³ç—‡å€™ç¾¤'],
      'ten': ['toxic epidermal necrolysis', 'ä¸­æ¯’æ€§è¡¨çš®å£Šæ­»ç—‡'],
      'le': ['lupus erythematosus', 'ã‚¨ãƒªãƒ†ãƒãƒˆãƒ¼ãƒ‡ã‚¹'],
      'dle': ['discoid lupus erythematosus', 'å††æ¿çŠ¶ã‚¨ãƒªãƒ†ãƒãƒˆãƒ¼ãƒ‡ã‚¹'],
      'scle': ['subacute cutaneous lupus', 'äºœæ€¥æ€§çš®è†šã‚¨ãƒªãƒ†ãƒãƒˆãƒ¼ãƒ‡ã‚¹'],
      'rosacea': ['rosacea', 'é…’ã•'],
      'prurigo': ['prurigo nodularis', 'çµç¯€æ€§ç—’ç–¹'],
      'pn2': ['prurigo nodularis', 'çµç¯€æ€§ç—’ç–¹'],
      
      // ===== OPHTHALMOLOGY =====
      'amd': ['age-related macular degeneration', 'åŠ é½¢é»„æ–‘å¤‰æ€§'],
      'wamd': ['wet age-related macular degeneration', 'æ»²å‡ºå‹åŠ é½¢é»„æ–‘å¤‰æ€§'],
      'damd': ['dry age-related macular degeneration', 'èç¸®å‹åŠ é½¢é»„æ–‘å¤‰æ€§'],
      'ga': ['geographic atrophy', 'åœ°å›³çŠ¶èç¸®'],
      'dme': ['diabetic macular edema', 'ç³–å°¿ç—…é»„æ–‘æµ®è…«'],
      'dr': ['diabetic retinopathy', 'ç³–å°¿ç—…ç¶²è†œç—‡'],
      'pdr': ['proliferative diabetic retinopathy', 'å¢—æ®–ç³–å°¿ç—…ç¶²è†œç—‡'],
      'npdr': ['nonproliferative diabetic retinopathy', 'éå¢—æ®–ç³–å°¿ç—…ç¶²è†œç—‡'],
      'rvo': ['retinal vein occlusion', 'ç¶²è†œé™è„ˆé–‰å¡ç—‡'],
      'brvo': ['branch retinal vein occlusion', 'ç¶²è†œé™è„ˆåˆ†æé–‰å¡ç—‡'],
      'crvo': ['central retinal vein occlusion', 'ç¶²è†œä¸­å¿ƒé™è„ˆé–‰å¡ç—‡'],
      'ded': ['dry eye disease', 'ãƒ‰ãƒ©ã‚¤ã‚¢ã‚¤'],
      'uvea': ['uveitis', 'ã¶ã©ã†è†œç‚'],
      'glc': ['glaucoma', 'ç·‘å†…éšœ'],
      'poag': ['primary open angle glaucoma', 'åŸç™ºé–‹æ”¾éš…è§’ç·‘å†…éšœ'],
      'rp': ['retinitis pigmentosa', 'ç¶²è†œè‰²ç´ å¤‰æ€§ç—‡'],
      'lca': ['leber congenital amaurosis', 'ãƒ¬ãƒ¼ãƒãƒ¼å…ˆå¤©é»’å†…éšœ'],
      'sta': ['stargardt disease', 'ã‚¹ã‚¿ãƒ¼ã‚¬ãƒ«ãƒˆç—…'],
      'to': ['thyroid eye disease', 'ç”²çŠ¶è…ºçœ¼ç—‡'],
      'ted': ['thyroid eye disease', 'ç”²çŠ¶è…ºçœ¼ç—‡'],
      
      // ===== HEMATOLOGY (Non-Oncology) =====
      'itp': ['immune thrombocytopenia', 'å…ç–«æ€§è¡€å°æ¿æ¸›å°‘ç—‡'],
      'tma': ['thrombotic microangiopathy', 'è¡€æ “æ€§å¾®å°è¡€ç®¡éšœå®³ç—‡'],
      'ttp': ['thrombotic thrombocytopenic purpura', 'è¡€æ “æ€§è¡€å°æ¿æ¸›å°‘æ€§ç´«æ–‘ç—…'],
      'hus': ['hemolytic uremic syndrome', 'hemolytic-uremic', 'æº¶è¡€æ€§å°¿æ¯’ç—‡ç—‡å€™ç¾¤', 'æº¶è¡€æ€§å°¿æ¯’ç—‡'],
      'pnh': ['paroxysmal nocturnal hemoglobinuria', 'ç™ºä½œæ€§å¤œé–“ãƒ˜ãƒ¢ã‚°ãƒ­ãƒ“ãƒ³å°¿ç—‡'],
      'aiha': ['autoimmune hemolytic anemia', 'è‡ªå·±å…ç–«æ€§æº¶è¡€æ€§è²§è¡€'],
      'scd': ['sickle cell disease', 'éŒçŠ¶èµ¤è¡€çƒç—‡'],
      'thal': ['thalassemia', 'ã‚µãƒ©ã‚»ãƒŸã‚¢'],
      'hemo': ['hemophilia', 'è¡€å‹ç—…'],
      'hema': ['hemophilia a', 'è¡€å‹ç—…A'],
      'hemb': ['hemophilia b', 'è¡€å‹ç—…B'],
      'vwd': ['von willebrand disease', 'ãƒ•ã‚©ãƒ³ãƒ»ãƒ´ã‚£ãƒ¬ãƒ–ãƒ©ãƒ³ãƒ‰ç—…'],
      'aa3': ['aplastic anemia', 'å†ç”Ÿä¸è‰¯æ€§è²§è¡€'],
      'dba': ['diamond blackfan anemia', 'ãƒ€ã‚¤ã‚¢ãƒ¢ãƒ³ãƒ‰ãƒ»ãƒ–ãƒ©ãƒƒã‚¯ãƒ•ã‚¡ãƒ³è²§è¡€'],
      'fanconi': ['fanconi anemia', 'ãƒ•ã‚¡ãƒ³ã‚³ãƒ‹è²§è¡€'],
      'cad2': ['cold agglutinin disease', 'å¯’å†·å‡é›†ç´ ç—‡'],
      
      // ===== RARE / GENETIC DISEASES =====
      'cf2': ['cystic fibrosis', 'åš¢èƒæ€§ç·šç¶­ç—‡'],
      'fabry': ['fabry disease', 'ãƒ•ã‚¡ãƒ–ãƒªãƒ¼ç—…'],
      'gaucher': ['gaucher disease', 'ã‚´ãƒ¼ã‚·ã‚§ç—…'],
      'pompe': ['pompe disease', 'ãƒãƒ³ãƒšç—…'],
      'mps': ['mucopolysaccharidosis', 'ãƒ ã‚³å¤šç³–ç—‡'],
      'pku': ['phenylketonuria', 'ãƒ•ã‚§ãƒ‹ãƒ«ã‚±ãƒˆãƒ³å°¿ç—‡'],
      'hae': ['hereditary angioedema', 'éºä¼æ€§è¡€ç®¡æ€§æµ®è…«'],
      'aat': ['alpha-1 antitrypsin deficiency', 'Î±1ã‚¢ãƒ³ãƒãƒˆãƒªãƒ—ã‚·ãƒ³æ¬ æç—‡'],
      'porphyria': ['porphyria', 'ãƒãƒ«ãƒ•ã‚£ãƒªãƒ³ç—‡'],
      'ahp': ['acute hepatic porphyria', 'æ€¥æ€§è‚æ€§ãƒãƒ«ãƒ•ã‚£ãƒªãƒ³ç—‡'],
      'aip': ['acute intermittent porphyria', 'æ€¥æ€§é–“æ¬ æ€§ãƒãƒ«ãƒ•ã‚£ãƒªã‚¢'],
      'hht': ['hereditary hemorrhagic telangiectasia', 'éºä¼æ€§å‡ºè¡€æ€§æ¯›ç´°è¡€ç®¡æ‹¡å¼µç—‡'],
      'xla': ['x-linked agammaglobulinemia', 'Xé€£é–ç„¡ã‚¬ãƒ³ãƒã‚°ãƒ­ãƒ–ãƒªãƒ³è¡€ç—‡'],
      'cvid': ['common variable immunodeficiency', 'åˆ†é¡ä¸èƒ½å‹å…ç–«ä¸å…¨ç—‡'],
      'scid': ['severe combined immunodeficiency', 'é‡ç—‡è¤‡åˆå…ç–«ä¸å…¨ç—‡'],
      'oi': ['osteogenesis imperfecta', 'éª¨å½¢æˆä¸å…¨ç—‡'],
      'tsc': ['tuberous sclerosis', 'çµç¯€æ€§ç¡¬åŒ–ç—‡'],
      'nf1': ['neurofibromatosis type 1', 'ç¥çµŒç·šç¶­è…«ç—‡1å‹'],
      'nf2': ['neurofibromatosis type 2', 'ç¥çµŒç·šç¶­è…«ç—‡2å‹'],
      'pws': ['prader-willi syndrome', 'ãƒ—ãƒ©ãƒ€ãƒ¼ãƒ»ã‚¦ã‚£ãƒªãƒ¼ç—‡å€™ç¾¤'],
      'angelman': ['angelman syndrome', 'ã‚¢ãƒ³ã‚¸ã‚§ãƒ«ãƒãƒ³ç—‡å€™ç¾¤'],
      'rett': ['rett syndrome', 'ãƒ¬ãƒƒãƒˆç—‡å€™ç¾¤'],
      'fragile': ['fragile x syndrome', 'è„†å¼±Xç—‡å€™ç¾¤'],
      'marfan': ['marfan syndrome', 'ãƒãƒ«ãƒ•ã‚¡ãƒ³ç—‡å€™ç¾¤'],
      'eds': ['ehlers-danlos syndrome', 'ã‚¨ãƒ¼ãƒ©ã‚¹ãƒ»ãƒ€ãƒ³ãƒ­ã‚¹ç—‡å€™ç¾¤'],
      'ards2': ['ards', 'æ€¥æ€§å‘¼å¸çª®è¿«ç—‡å€™ç¾¤'],
      
      // ===== PSYCHIATRY =====
      'mdd': ['major depressive disorder', 'å¤§ã†ã¤ç—…æ€§éšœå®³', 'ã†ã¤ç—…'],
      'trd': ['treatment resistant depression', 'æ²»ç™‚æŠµæŠ—æ€§ã†ã¤ç—…'],
      'gad': ['generalized anxiety disorder', 'å…¨èˆ¬æ€§ä¸å®‰éšœå®³'],
      'sad': ['social anxiety disorder', 'ç¤¾ä¼šä¸å®‰éšœå®³'],
      'panic': ['panic disorder', 'ãƒ‘ãƒ‹ãƒƒã‚¯éšœå®³'],
      'ptsd': ['post-traumatic stress disorder', 'å¿ƒçš„å¤–å‚·å¾Œã‚¹ãƒˆãƒ¬ã‚¹éšœå®³'],
      'ocd': ['obsessive compulsive disorder', 'å¼·è¿«æ€§éšœå®³'],
      'bpd': ['bipolar disorder', 'åŒæ¥µæ€§éšœå®³'],
      'bp1': ['bipolar i disorder', 'åŒæ¥µIå‹éšœå®³'],
      'bp2': ['bipolar ii disorder', 'åŒæ¥µIIå‹éšœå®³'],
      'scz': ['schizophrenia', 'çµ±åˆå¤±èª¿ç—‡'],
      'sz': ['schizophrenia', 'çµ±åˆå¤±èª¿ç—‡'],
      'adhd': ['attention deficit hyperactivity disorder', 'æ³¨æ„æ¬ å¦‚ãƒ»å¤šå‹•ç—‡'],
      'asd2': ['autism spectrum disorder', 'è‡ªé–‰ã‚¹ãƒšã‚¯ãƒˆãƒ©ãƒ ç—‡'],
      'an': ['anorexia nervosa', 'ç¥çµŒæ€§ã‚„ã›ç—‡'],
      'bn': ['bulimia nervosa', 'ç¥çµŒæ€§éé£Ÿç—‡'],
      'bed': ['binge eating disorder', 'éé£Ÿæ€§éšœå®³'],
      'insomnia': ['insomnia', 'ä¸çœ ç—‡'],
      'sud': ['substance use disorder', 'ç‰©è³ªä½¿ç”¨éšœå®³'],
      'aud': ['alcohol use disorder', 'ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«ä½¿ç”¨éšœå®³'],
      'oud': ['opioid use disorder', 'ã‚ªãƒ”ã‚ªã‚¤ãƒ‰ä½¿ç”¨éšœå®³'],
      
      // ===== OTHER COMMON =====
      'bph': ['benign prostatic hyperplasia', 'å‰ç«‹è…ºè‚¥å¤§ç—‡'],
      'oab': ['overactive bladder', 'éæ´»å‹•è†€èƒ±'],
      'ic': ['interstitial cystitis', 'é–“è³ªæ€§è†€èƒ±ç‚'],
      'bps': ['bladder pain syndrome', 'è†€èƒ±ç—›ç—‡å€™ç¾¤'],
      'ed': ['erectile dysfunction', 'å‹ƒèµ·éšœå®³'],
      'luts': ['lower urinary tract symptoms', 'ä¸‹éƒ¨å°¿è·¯ç—‡çŠ¶'],
      'oa': ['osteoarthritis', 'å¤‰å½¢æ€§é–¢ç¯€ç—‡'],
      'op': ['osteoporosis', 'éª¨ç²—é¬†ç—‡'],
      'fms': ['fibromyalgia', 'ç·šç¶­ç­‹ç—›ç—‡'],
      'cfs': ['chronic fatigue syndrome', 'æ…¢æ€§ç–²åŠ´ç—‡å€™ç¾¤'],
      'me': ['myalgic encephalomyelitis', 'ç­‹ç—›æ€§è„³è„Šé«„ç‚'],
      'mecfs': ['me/cfs', 'ç­‹ç—›æ€§è„³è„Šé«„ç‚/æ…¢æ€§ç–²åŠ´ç—‡å€™ç¾¤'],
      'endo': ['endometriosis', 'å­å®®å†…è†œç—‡'],
      'adenomyosis': ['adenomyosis', 'å­å®®è…ºç­‹ç—‡'],
      'uf': ['uterine fibroids', 'å­å®®ç­‹è…«'],
      'crps': ['complex regional pain syndrome', 'è¤‡åˆæ€§å±€æ‰€ç–¼ç—›ç—‡å€™ç¾¤'],
      'anaphylaxis': ['anaphylaxis', 'ã‚¢ãƒŠãƒ•ã‚£ãƒ©ã‚­ã‚·ãƒ¼'],
      'mastocytosis': ['mastocytosis', 'è‚¥æº€ç´°èƒç—‡'],
      'narco': ['narcolepsy', 'ãƒŠãƒ«ã‚³ãƒ¬ãƒ—ã‚·ãƒ¼'],
      'rls': ['restless legs syndrome', 'ã‚€ãšã‚€ãšè„šç—‡å€™ç¾¤'],
      'gi': ['gastrointestinal', 'æ¶ˆåŒ–å™¨'],
      'ge': ['gastroenteritis', 'èƒƒè…¸ç‚'],
    };

    // Synonym dictionary for common medical terms
    const synonyms = {
      'cancer': ['carcinoma', 'malignant', 'neoplasm', 'tumor', 'tumour', 'oncology', 'ãŒã‚“', 'ç™Œ', 'æ‚ªæ€§'],
      'heart': ['cardiac', 'cardiovascular', 'cardio', 'å¿ƒè‡“', 'å¿ƒ'],
      'kidney': ['renal', 'nephro', 'è…è‡“', 'è…'],
      'liver': ['hepatic', 'hepato', 'è‚è‡“', 'è‚'],
      'lung': ['pulmonary', 'respiratory', 'è‚º'],
      'brain': ['cerebral', 'neuro', 'è„³'],
      'stomach': ['gastric', 'èƒƒ'],
      'intestine': ['bowel', 'colon', 'colonic', 'enteric', 'è…¸'],
      'skin': ['derma', 'cutaneous', 'çš®è†š'],
      'bone': ['osteo', 'skeletal', 'éª¨'],
      'blood': ['hema', 'hemato', 'è¡€æ¶²'],
      'nerve': ['neuro', 'neural', 'ç¥çµŒ'],
      'muscle': ['muscular', 'myo', 'ç­‹è‚‰', 'ç­‹'],
      'joint': ['arthr', 'articular', 'é–¢ç¯€'],
      'eye': ['ocular', 'ophthalm', 'çœ¼', 'ç›®'],
      'ear': ['otic', 'aural', 'è€³'],
      'diabetes': ['diabetic', 'ç³–å°¿ç—…'],
      'infection': ['infectious', 'infective', 'æ„ŸæŸ“'],
      'inflammation': ['inflammatory', 'itis', 'ç‚ç—‡'],
      'chronic': ['long-term', 'persistent', 'æ…¢æ€§'],
      'acute': ['sudden', 'rapid', 'æ€¥æ€§'],
      'pain': ['algia', 'ache', 'ç—›ã¿', 'ç–¼ç—›'],
      'high': ['hyper', 'elevated', 'é«˜'],
      'low': ['hypo', 'decreased', 'ä½'],
      'breast': ['mammary', 'ä¹³æˆ¿', 'ä¹³è…º'],
      'prostate': ['prostatic', 'å‰ç«‹è…º'],
      'thyroid': ['thyroidal', 'ç”²çŠ¶è…º'],
      'pancreas': ['pancreatic', 'è†µè‡“', 'è†µ'],
      'bladder': ['vesical', 'è†€èƒ±'],
      'uterus': ['uterine', 'å­å®®'],
      'ovary': ['ovarian', 'åµå·£'],
    };

    // Social sensitivity keywords and messages
    const socialKeywords = {
      hiv: {
        keywords: ['HIV', 'ã‚¨ã‚¤ã‚º', 'AIDS', 'å…ç–«ä¸å…¨ã‚¦ã‚¤ãƒ«ã‚¹'],
        jp: 'HIVã«é–¢é€£ã™ã‚‹ç–¾æ‚£ã¯ã€æ—¥æœ¬ã§ã¯ç¤¾ä¼šçš„ãªã‚¹ãƒ†ã‚£ã‚°ãƒãŒå¼·ãã€èª¿æŸ»ã¸ã®å‚åŠ ã«æŠµæŠ—ã‚’æŒã¤æ‚£è€…ãŒå¤šã„ã§ã™ã€‚æ‚£è€…æ•°ãŒã‚ã£ã¦ã‚‚å®Ÿéš›ã®ãƒªã‚¯ãƒ«ãƒ¼ãƒˆã¯å›°é›£ã§ã™ã€‚',
        en: 'HIV-related conditions carry significant social stigma in Japan. Despite patient numbers, actual recruitment is challenging due to privacy concerns.'
      },
      sti: {
        keywords: ['æ¢…æ¯’', 'æ·‹ç—…', 'ã‚¯ãƒ©ãƒŸã‚¸ã‚¢', 'æ€§æ„ŸæŸ“', 'æ€§è¡Œç‚ºæ„ŸæŸ“', 'ãƒ˜ãƒ«ãƒšã‚¹', 'å°–åœ­', 'STD', 'STI', 'genital', 'sexually', 'syphilis', 'gonorrhea', 'chlamydia'],
        jp: 'æ€§æ„ŸæŸ“ç—‡ã¯ç¤¾ä¼šçš„ã«æ¥ãšã‹ã—ã„ã¨ã•ã‚Œã‚‹ç–¾æ‚£ã®ãŸã‚ã€æ—¥æœ¬ã§ã¯èª¿æŸ»å¯¾è±¡ã¨ã—ã¦å‘ã„ã¦ã„ã¾ã›ã‚“ã€‚è‡ªå·±ç”³å‘Šã‚’é¿ã‘ã‚‹æ‚£è€…ãŒå¤šãã€å®Ÿéš›ã®ãƒªã‚¯ãƒ«ãƒ¼ãƒˆã¯éå¸¸ã«å›°é›£ã§ã™ã€‚',
        en: 'STIs are considered socially embarrassing in Japan. Patients often avoid self-disclosure, making recruitment extremely difficult regardless of patient numbers.'
      },
      mental: {
        keywords: ['ç²¾ç¥', 'çµ±åˆå¤±èª¿', 'ã†ã¤ç—…', 'èºã†ã¤', 'åŒæ¥µæ€§', 'èªçŸ¥ç—‡', 'ä¾å­˜ç—‡', 'ã‚¢ãƒ«ã‚³ãƒ¼ãƒ«ä¾å­˜', 'è–¬ç‰©ä¾å­˜', 'schizophrenia', 'depression', 'bipolar', 'dementia', 'addiction'],
        jp: 'ç²¾ç¥ç–¾æ‚£ã¯æ—¥æœ¬ã§ã¯åè¦‹ãŒæ ¹å¼·ãã€æ‚£è€…ã‚„ãã®å®¶æ—ãŒèª¿æŸ»å‚åŠ ã«æ¶ˆæ¥µçš„ãªã“ã¨ãŒå¤šã„ã§ã™ã€‚ç‰¹ã«é‡åº¦ã®ç²¾ç¥ç–¾æ‚£ã§ã¯åŒæ„å–å¾—ã‚‚èª²é¡Œã¨ãªã‚Šã¾ã™ã€‚',
        en: 'Mental health conditions face strong prejudice in Japan. Patients and families are often reluctant to participate. Consent acquisition can also be challenging for severe cases.'
      },
      obesity: {
        keywords: ['è‚¥æº€', 'éä½“é‡', 'obesity', 'overweight'],
        jp: 'è‚¥æº€ã«é–¢é€£ã™ã‚‹ç–¾æ‚£ã¯ã€æ—¥æœ¬ã§ã¯å¤–è¦‹çš„ãªæ¥ãšã‹ã—ã•ã‹ã‚‰è‡ªå·±ç”³å‘Šã‚’é¿ã‘ã‚‹å‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚',
        en: 'Obesity-related conditions in Japan face self-disclosure reluctance due to appearance-related embarrassment.'
      },
      incontinence: {
        keywords: ['å¤±ç¦', 'æ’å°¿éšœå®³', 'ä¾¿å¤±ç¦', 'incontinence', 'enuresis'],
        jp: 'å¤±ç¦é–¢é€£ã®ç–¾æ‚£ã¯ã€æ—¥æœ¬ã§ã¯æ¥ãšã‹ã—ã„ã¨ã•ã‚Œã€ç‰¹ã«é«˜é½¢è€…ã«ãŠã„ã¦èª¿æŸ»å‚åŠ ã¸ã®æŠµæŠ—ãŒå¼·ã„ã§ã™ã€‚',
        en: 'Incontinence-related conditions are considered embarrassing in Japan, with strong resistance to participation especially among elderly patients.'
      }
    };

    // Recruitment messages based on patient count
    function getRecruitmentInfo(count) {
      if (count < 20000) {
        return {
          level: 'red',
          icon: 'ğŸš¨',
          title: 'æ¥µã‚ã¦å›°é›£ / Extremely Difficult',
          jp: 'éå¸¸ã«æ‚£è€…æ•°ãŒå°‘ãªã„ãŸã‚ã€ãƒªã‚¯ãƒ«ãƒ¼ãƒˆãŒç¾å®Ÿçš„ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚SNSçµŒç”±ã§é•·æœŸãƒªã‚¯ãƒ«ãƒ¼ãƒˆæœŸé–“ã‚’ç¢ºä¿ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚æ‚£è€…ä¼šã‚„KOLåŒ»å¸«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®æ´»ç”¨ãŒå¿…é ˆã§ã™ã€‚',
          en: 'Very low patient numbers make recruitment unrealistic through standard methods. Long-term SNS-based recruitment is necessary. Patient associations and KOL physician networks are essential.',
          estimate: '0-2äºº / 0-2 patients'
        };
      } else if (count < 50000) {
        return {
          level: 'red',
          icon: 'âš ï¸',
          title: 'ã‹ãªã‚Šå›°é›£ / Very Difficult',
          jp: 'éå¸¸ã«æ‚£è€…æ•°ãŒå°‘ãªã„ãŸã‚ã€ãƒªã‚¯ãƒ«ãƒ¼ãƒˆãŒã‹ãªã‚Šå³ã—ã„ã§ã™ã€‚ç½¹æ‚£ã—ã¦ã„ã‚‹ã¨ã„ã†æ¡ä»¶ã®ã¿ã§è¦‹è¾¼ã¿æ•°ã¯æ•°äººç¨‹åº¦ã§ã™ã€‚3Hã€åŒ»å¸«ã®ç´¹ä»‹ã€SNSã‚¿ãƒ¼ã‚²ãƒƒãƒˆã®ä½µç”¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚',
          en: 'Very low patient numbers make recruitment very difficult. Expected recruits are only a few patients with disease condition alone. Recommend combining 3H, physician referrals, and SNS targeting.',
          estimate: '2-3äºº / 2-3 patients'
        };
      } else if (count < 80000) {
        return {
          level: 'orange',
          icon: 'âš ï¸',
          title: 'å›°é›£ / Difficult',
          jp: 'æ‚£è€…æ•°ãŒå°‘ãªã„ãŸã‚ã€ãƒ‘ãƒãƒ«ã«ç™»éŒ²ã•ã‚Œã¦ã„ãªã‘ã‚Œã°ãƒªã‚¯ãƒ«ãƒ¼ãƒˆã¯ç¾å®Ÿçš„ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€éå»ã«3åç¨‹åº¦ã®å®Ÿç¸¾ãŒã‚ã‚Šã¾ã™ã€‚3Hã‚„åŒ»å¸«ã®ç´¹ä»‹ã€SNSã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’ä½µç”¨ã—ã¦ã‚‚3-4äººãŒç¾å®Ÿçš„ãªæ•°å­—ã§ã™ã€‚',
          en: 'Low patient numbers mean panel registration is necessary. Historical success: approximately 3 patients. Even with 3H, physician referrals, and SNS targeting, 3-4 patients is realistic.',
          estimate: '3-4äºº / 3-4 patients'
        };
      } else if (count < 120000) {
        return {
          level: 'orange',
          icon: 'ğŸ“Š',
          title: 'ã‚„ã‚„å›°é›£ / Somewhat Difficult',
          jp: 'å¸Œå°‘ç–¾æ‚£ã»ã©ã§ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€æ‚£è€…æ•°ãŒå°‘ãªã„ç–¾æ‚£ã§ã™ã€‚ãƒ‘ãƒãƒ«ã«ç™»éŒ²ã•ã‚Œã¦ã„ãªã‹ã£ãŸå ´åˆã¯ãƒªã‚¯ãƒ«ãƒ¼ãƒˆãŒé›£èˆªã—ã¾ã™ã€‚åŒã˜è¦æ¨¡ã®æ‚£è€…æ•°ã®ç–¾æ‚£ã§5åç¨‹åº¦ã®éå»ã®å®Ÿç¸¾ã¯ã‚ã‚Šã¾ã™ã€‚',
          en: 'Not as rare as orphan diseases, but patient numbers are still low. Without panel registration, recruitment will be challenging. Historical success with similar patient populations: approximately 5 patients.',
          estimate: '4-5äºº / 4-5 patients'
        };
      } else if (count < 150000) {
        return {
          level: 'orange',
          icon: 'ğŸ“Š',
          title: 'ä¸­ç¨‹åº¦ / Moderate',
          jp: 'æ‚£è€…æ•°ã¯ã‚„ã‚„å°‘ãªã„ã§ã™ãŒã€ãƒ‘ãƒãƒ«å†…ã«è©²å½“è€…ãŒã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚éå»ã®åŒè¦æ¨¡ç–¾æ‚£ã§ã®å®Ÿç¸¾ã¯5-6åç¨‹åº¦ã§ã™ã€‚æ¡ä»¶ã‚’çµã‚Šã™ããªã‘ã‚Œã°ãƒªã‚¯ãƒ«ãƒ¼ãƒˆå¯èƒ½ã§ã™ã€‚',
          en: 'Patient numbers are somewhat low, but panel matches are possible. Historical success with similar diseases: 5-6 patients. Recruitment is feasible if conditions are not too restrictive.',
          estimate: '5-6äºº / 5-6 patients'
        };
      } else if (count < 200000) {
        return {
          level: 'green',
          icon: 'âœ…',
          title: 'å®Ÿç¾å¯èƒ½ / Feasible',
          jp: 'æ¨™æº–çš„ãªãƒªã‚¯ãƒ«ãƒ¼ãƒˆãŒå¯èƒ½ãªæ‚£è€…æ•°ã§ã™ã€‚ãƒ‘ãƒãƒ«ã‚’æ´»ç”¨ã™ã‚Œã°6-7åç¨‹åº¦ã®ãƒªã‚¯ãƒ«ãƒ¼ãƒˆãŒæœŸå¾…ã§ãã¾ã™ã€‚è¿½åŠ æ¡ä»¶ã«ã‚ˆã£ã¦ã¯é›£æ˜“åº¦ãŒä¸ŠãŒã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚',
          en: 'Standard recruitment is possible with this patient population. Using panels, 6-7 patients can be expected. Additional conditions may increase difficulty.',
          estimate: '6-7äºº / 6-7 patients'
        };
      } else if (count < 250000) {
        return {
          level: 'green',
          icon: 'âœ…',
          title: 'è‰¯å¥½ / Good',
          jp: 'ãƒªã‚¯ãƒ«ãƒ¼ãƒˆã—ã‚„ã™ã„æ‚£è€…æ•°ã§ã™ã€‚ãƒ‘ãƒãƒ«ã‚’æ´»ç”¨ã™ã‚Œã°7-8åç¨‹åº¦ã®ãƒªã‚¯ãƒ«ãƒ¼ãƒˆãŒæœŸå¾…ã§ãã¾ã™ã€‚å¤šå°‘ã®è¿½åŠ æ¡ä»¶ãŒã‚ã£ã¦ã‚‚å¯¾å¿œå¯èƒ½ã§ã™ã€‚',
          en: 'Patient population supports good recruitment. Using panels, 7-8 patients can be expected. Some additional conditions can be accommodated.',
          estimate: '7-8äºº / 7-8 patients'
        };
      } else if (count < 500000) {
        return {
          level: 'green',
          icon: 'ğŸ‘',
          title: 'å®¹æ˜“ / Easy',
          jp: 'ååˆ†ãªæ‚£è€…æ•°ãŒã‚ã‚Šã€8åç¨‹åº¦ã®ãƒªã‚¯ãƒ«ãƒ¼ãƒˆãŒå¯èƒ½ã§ã™ã€‚æ¡ä»¶ã‚’è¿½åŠ ã—ã¦ã‚‚æŸ”è»Ÿã«å¯¾å¿œã§ãã¾ã™ã€‚è¤‡æ•°æ¡ä»¶ã®çµ„ã¿åˆã‚ã›ã‚‚æ¤œè¨å¯èƒ½ã§ã™ã€‚',
          en: 'Sufficient patient population for recruiting approximately 8 patients. Flexible with additional conditions. Multiple condition combinations can be considered.',
          estimate: '8äººä»¥ä¸Š / 8+ patients'
        };
      } else {
        return {
          level: 'green',
          icon: 'ğŸ¯',
          title: 'éå¸¸ã«å®¹æ˜“ / Very Easy',
          jp: 'å¤§è¦æ¨¡ãªæ‚£è€…é›†å›£ãŒã‚ã‚Šã€10åä»¥ä¸Šã®ãƒªã‚¯ãƒ«ãƒ¼ãƒˆãŒå¯èƒ½ã§ã™ã€‚è¤‡æ•°ã®è¿½åŠ æ¡ä»¶ãŒã‚ã£ã¦ã‚‚å¯¾å¿œå¯èƒ½ã§ã€ã‚»ã‚°ãƒ¡ãƒ³ãƒˆåˆ¥ã®èª¿æŸ»ã‚‚æ¤œè¨ã§ãã¾ã™ã€‚',
          en: 'Large patient population supports recruiting 10+ patients. Multiple additional conditions can be accommodated. Segmented studies are also possible.',
          estimate: '10äººä»¥ä¸Š / 10+ patients'
        };
      }
    }

    // Check for social sensitivity
    function checkSocialSensitivity(diseaseName, diseaseEnglish) {
      const combined = (diseaseName + ' ' + diseaseEnglish).toLowerCase();
      
      for (const [key, config] of Object.entries(socialKeywords)) {
        for (const keyword of config.keywords) {
          if (combined.includes(keyword.toLowerCase())) {
            return config;
          }
        }
      }
      return null;
    }

    // Format number with commas
    function formatNumber(num) {
      return num.toLocaleString('ja-JP');
    }

    // Load disease data
    async function loadDiseases() {
      try {
        const response = await fetch('disease_data.json?v=' + Date.now());
        diseases = await response.json();
        console.log(`Loaded ${diseases.length} diseases`);
      } catch (error) {
        console.error('Error loading disease data:', error);
      }
    }

    // Load project history
    async function loadProjectHistory() {
      try {
        const response = await fetch('project_history.json?v=' + Date.now());
        projectHistory = await response.json();
        console.log(`Loaded ${projectHistory.length} project records`);
      } catch (error) {
        console.error('Error loading project history:', error);
      }
    }

    // Check severity warning
    function checkSeverityWarning(diseaseName, diseaseEnglish) {
      const combined = (diseaseName + ' ' + diseaseEnglish).toLowerCase();
      
      for (const [key, config] of Object.entries(severityWarnings)) {
        for (const keyword of config.keywords) {
          if (combined.includes(keyword.toLowerCase())) {
            return config;
          }
        }
      }
      return null;
    }

    // Find matching project history
    function findProjectHistory(diseaseName, diseaseEnglish) {
      const searchTerms = [
        diseaseName.toLowerCase(),
        diseaseEnglish.toLowerCase()
      ];
      
      // Extract keywords for matching
      const keywords = [];
      if (diseaseName) {
        keywords.push(...diseaseName.split(/[ï¼\/\s]+/).filter(k => k.length > 2));
      }
      if (diseaseEnglish) {
        keywords.push(...diseaseEnglish.split(/[\s,]+/).filter(k => k.length > 2));
      }
      
      return projectHistory.filter(record => {
        const recordName = (record.disease_jp || '').toLowerCase();
        const recordAbbr = (record.disease_abbr || '').toLowerCase();
        
        // Direct match
        for (const term of searchTerms) {
          if (recordName.includes(term) || term.includes(recordName)) return true;
          if (recordAbbr.includes(term)) return true;
        }
        
        // Keyword match
        for (const keyword of keywords) {
          const kw = keyword.toLowerCase();
          if (recordName.includes(kw) || recordAbbr.includes(kw)) return true;
        }
        
        return false;
      });
    }

    // Display history section
    function displayHistorySection(records) {
      const section = document.getElementById('historySection');
      const summary = document.getElementById('historySummary');
      
      if (records.length === 0) {
        section.style.display = 'none';
        return;
      }
      
      currentHistoryRecords = records;
      
      // Calculate summary stats
      const totalCount = records.reduce((sum, r) => sum + (r.count || 0), 0);
      const methods = [...new Set(records.map(r => r.method).filter(m => m))];
      const subjectTypes = [...new Set(records.map(r => r.subject_type).filter(t => t))];
      
      summary.innerHTML = `
        <div class="history-summary-title">ğŸ“Š å®Ÿç¸¾ã‚µãƒãƒªãƒ¼ / Summary</div>
        <div class="history-stats">
          <div class="history-stat">
            <div class="history-stat-label">ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ•°</div>
            <div class="history-stat-value">${records.length}ä»¶</div>
          </div>
          <div class="history-stat">
            <div class="history-stat-label">ç·ãƒªã‚¯ãƒ«ãƒ¼ãƒˆæ•°</div>
            <div class="history-stat-value">${totalCount}å</div>
          </div>
          <div class="history-stat">
            <div class="history-stat-label">æ‰‹æ³•</div>
            <div class="history-stat-value">${methods.slice(0, 2).join(', ')}${methods.length > 2 ? '...' : ''}</div>
          </div>
        </div>
      `;
      
      section.style.display = 'block';
    }

    // Show history modal
    function showHistoryModal() {
      const modal = document.getElementById('historyModal');
      const modalBody = document.getElementById('modalBody');
      
      if (currentHistoryRecords.length === 0) {
        modalBody.innerHTML = '<div class="no-history">éå»ã®å®Ÿç¸¾ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</div>';
      } else {
        modalBody.innerHTML = currentHistoryRecords.map(record => `
          <div class="history-card">
            <div class="history-card-header">
              <div class="history-card-date">ğŸ“… ${record.date || 'N/A'}</div>
              <div class="history-card-count">ğŸ‘¥ ${record.count || 0}å</div>
            </div>
            <div class="history-card-method">${record.method || 'N/A'} / ${record.subject_type || 'N/A'}</div>
            <div class="history-card-condition">
              <strong>å¯¾è±¡æ¡ä»¶:</strong><br>
              ${record.conditions || 'æ¡ä»¶è©³ç´°ãªã—'}
            </div>
            <div class="history-card-meta">
              ${record.drug ? `ğŸ’Š ${record.drug}` : ''}<br>
              ${record.end_client ? `ğŸ¢ ${record.end_client}` : ''}
              ${record.recruiter ? ` / via ${record.recruiter}` : ''}
            </div>
          </div>
        `).join('');
      }
      
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    // Close history modal
    function closeHistoryModal() {
      document.getElementById('historyModal').classList.remove('active');
      document.body.style.overflow = '';
    }

    // Expand query with abbreviations and synonyms
    function expandQuery(query) {
      const lowerQuery = query.toLowerCase().trim();
      let expandedTerms = [lowerQuery];
      
      // Check if query matches an abbreviation
      if (abbreviations[lowerQuery]) {
        expandedTerms = expandedTerms.concat(abbreviations[lowerQuery]);
      }
      
      // Check synonyms for each word in the query
      const words = lowerQuery.split(/\s+/);
      words.forEach(word => {
        // Check if word is an abbreviation
        if (abbreviations[word]) {
          expandedTerms = expandedTerms.concat(abbreviations[word]);
        }
        // Check if word has synonyms
        for (const [key, syns] of Object.entries(synonyms)) {
          if (word === key || syns.some(s => s.toLowerCase() === word)) {
            expandedTerms.push(key);
            expandedTerms = expandedTerms.concat(syns);
          }
        }
      });
      
      return [...new Set(expandedTerms)]; // Remove duplicates
    }

    // Search diseases with advanced matching
    function searchDiseases(query) {
      if (!query || query.length < 1) return [];
      
      const lowerQuery = query.toLowerCase().trim();
      
      // Split query into keywords for AND search
      const keywords = lowerQuery.split(/\s+/).filter(k => k.length > 0);
      
      // Expand each keyword
      const expandedKeywordSets = keywords.map(k => expandQuery(k));
      
      // Score-based search for better ranking
      const results = diseases.map(d => {
        const jp = (d.disease_jp || '').toLowerCase();
        const en = (d.disease_en || '').toLowerCase();
        const icd = (d.icd10 || '').toLowerCase();
        const combined = `${jp} ${en} ${icd}`;
        
        let score = 0;
        let matchedAllKeywords = true;
        
        // Check each keyword set (AND logic between keywords)
        for (const expandedTerms of expandedKeywordSets) {
          let keywordMatched = false;
          
          for (const term of expandedTerms) {
            if (combined.includes(term.toLowerCase())) {
              keywordMatched = true;
              // Higher score for exact matches
              if (en.includes(term.toLowerCase())) score += 10;
              if (jp.includes(term.toLowerCase())) score += 10;
              if (icd.includes(term.toLowerCase())) score += 15;
              // Bonus for matching at start
              if (en.startsWith(term.toLowerCase()) || jp.startsWith(term.toLowerCase())) score += 5;
            }
          }
          
          if (!keywordMatched) {
            matchedAllKeywords = false;
            break;
          }
        }
        
        // Bonus for higher patient count (more relevant diseases)
        if (matchedAllKeywords && d.patient_count > 100000) score += 2;
        if (matchedAllKeywords && d.patient_count > 500000) score += 3;
        
        return { disease: d, score, matched: matchedAllKeywords };
      })
      .filter(r => r.matched && r.score > 0)
      .sort((a, b) => b.score - a.score)
      .slice(0, 30)
      .map(r => r.disease);
      
      return results;
    }

    // Display suggestions
    function displaySuggestions(results) {
      const container = document.getElementById('suggestions');
      
      if (results.length === 0) {
        container.classList.remove('active');
        return;
      }

      container.innerHTML = results.map((d, i) => `
        <div class="suggestion-item" data-index="${i}" onclick="selectDisease(${diseases.indexOf(d)})">
          <div class="suggestion-name">${d.disease_jp}</div>
          <div class="suggestion-english">${d.disease_en}</div>
          <div class="suggestion-meta">
            <span class="suggestion-icd">${d.icd10}</span>
            <span class="suggestion-count">ğŸ‘¥ ${formatNumber(d.patient_count)}äºº</span>
          </div>
        </div>
      `).join('');

      container.classList.add('active');
      selectedIndex = -1;
    }

    // Select a disease
    function selectDisease(index) {
      const disease = diseases[index];
      displayResult(disease);
      document.getElementById('suggestions').classList.remove('active');
      document.getElementById('searchInput').value = disease.disease_jp;
    }

    // Display result
    function displayResult(disease) {
      document.getElementById('diseaseName').textContent = disease.disease_jp;
      document.getElementById('diseaseEnglish').textContent = disease.disease_en;
      document.getElementById('icdCode').textContent = disease.icd10;
      document.getElementById('patientNumber').textContent = formatNumber(disease.patient_count);

      // Check social sensitivity
      const socialInfo = checkSocialSensitivity(disease.disease_jp, disease.disease_en);
      const socialAlert = document.getElementById('socialAlert');
      
      if (socialInfo) {
        document.getElementById('socialMessage').innerHTML = `
          <p style="margin-bottom: 10px;">${socialInfo.jp}</p>
          <p style="color: var(--brown-medium); font-style: italic;">${socialInfo.en}</p>
        `;
        socialAlert.classList.add('active');
      } else {
        socialAlert.classList.remove('active');
      }

      // Check severity warning
      const severityInfo = checkSeverityWarning(disease.disease_jp, disease.disease_en);
      const severityAlert = document.getElementById('severityAlert');
      
      if (severityInfo) {
        document.getElementById('severityMessage').innerHTML = `
          <p style="margin-bottom: 10px;">${severityInfo.jp}</p>
          <p style="color: var(--brown-medium); font-style: italic;">${severityInfo.en}</p>
        `;
        severityAlert.classList.add('active');
      } else {
        severityAlert.classList.remove('active');
      }

      // Check project history
      const historyRecords = findProjectHistory(disease.disease_jp, disease.disease_en);
      displayHistorySection(historyRecords);

      // Get recruitment info
      const recruitInfo = getRecruitmentInfo(disease.patient_count);
      
      document.getElementById('recruitmentSection').innerHTML = `
        <div class="recruitment-box ${recruitInfo.level}">
          <div class="recruitment-title">
            <span class="icon">${recruitInfo.icon}</span>
            <span>${recruitInfo.title}</span>
          </div>
          <div class="recruitment-message">${recruitInfo.jp}</div>
          <div class="recruitment-english">${recruitInfo.en}</div>
        </div>
      `;

      document.getElementById('estimateNumber').textContent = recruitInfo.estimate;

      // Show result card
      document.getElementById('resultCard').classList.add('active');

      // Scroll to result
      document.getElementById('resultCard').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // Reset search
    function resetSearch() {
      document.getElementById('searchInput').value = '';
      document.getElementById('resultCard').classList.remove('active');
      document.getElementById('suggestions').classList.remove('active');
      document.getElementById('searchInput').focus();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Keyboard navigation
    function handleKeydown(e) {
      const suggestions = document.getElementById('suggestions');
      const items = suggestions.querySelectorAll('.suggestion-item');
      
      if (!suggestions.classList.contains('active') || items.length === 0) return;

      if (e.key === 'ArrowDown') {
        e.preventDefault();
        selectedIndex = Math.min(selectedIndex + 1, items.length - 1);
        updateSelection(items);
      } else if (e.key === 'ArrowUp') {
        e.preventDefault();
        selectedIndex = Math.max(selectedIndex - 1, 0);
        updateSelection(items);
      } else if (e.key === 'Enter' && selectedIndex >= 0) {
        e.preventDefault();
        items[selectedIndex].click();
      } else if (e.key === 'Escape') {
        suggestions.classList.remove('active');
      }
    }

    function updateSelection(items) {
      items.forEach((item, i) => {
        item.classList.toggle('selected', i === selectedIndex);
        if (i === selectedIndex) {
          item.scrollIntoView({ block: 'nearest' });
        }
      });
    }

    // Event listeners
    document.getElementById('searchInput').addEventListener('input', (e) => {
      const results = searchDiseases(e.target.value);
      displaySuggestions(results);
    });

    document.getElementById('searchInput').addEventListener('keydown', handleKeydown);

    document.getElementById('searchInput').addEventListener('focus', (e) => {
      if (e.target.value) {
        const results = searchDiseases(e.target.value);
        displaySuggestions(results);
      }
    });

    // Click outside to close suggestions
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.search-section')) {
        document.getElementById('suggestions').classList.remove('active');
      }
    });

    // Close modal on overlay click
    document.getElementById('historyModal').addEventListener('click', (e) => {
      if (e.target.classList.contains('modal-overlay')) {
        closeHistoryModal();
      }
    });

    // Close modal on escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        closeHistoryModal();
      }
    });

    // Initialize
    loadDiseases();
    loadProjectHistory();
  </script>
</body>
</html>
